{"version":2,"kind":"Notebook","sha256":"3447f83cea40b207df9fd01def86c52d63cf6a12bedf598001048331a371aec3","slug":"notebooks.pelicanfs","location":"/notebooks/01_pelicanfs.ipynb","dependencies":[],"frontmatter":{"title":"Using PelicanFS via FSSpec to Access Data on the OSDF","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Harsha R. Hampapura","given":"Harsha R.","family":"Hampapura"},"name":"Harsha R. Hampapura","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Brian Bockelman","given":"Brian","family":"Bockelman"},"name":"Brian Bockelman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Alexander Hoelzeman","given":"Alexander","family":"Hoelzeman"},"name":"Alexander Hoelzeman","id":"contributors-myst-generated-uid-2"},{"nameParsed":{"literal":"Carrie Wall","given":"Carrie","family":"Wall"},"name":"Carrie Wall","id":"contributors-myst-generated-uid-3"},{"nameParsed":{"literal":"Emma Turetsky","given":"Emma","family":"Turetsky"},"name":"Emma Turetsky","id":"contributors-myst-generated-uid-4"},{"nameParsed":{"literal":"Amandha Wingert Barok","given":"Amandha Wingert","family":"Barok"},"name":"Amandha Wingert Barok","id":"contributors-myst-generated-uid-5"},{"nameParsed":{"literal":"Aashish Panta","given":"Aashish","family":"Panta"},"name":"Aashish Panta","id":"contributors-myst-generated-uid-6"},{"nameParsed":{"literal":"Riley Conroy","given":"Riley","family":"Conroy"},"name":"Riley Conroy","id":"contributors-myst-generated-uid-7"},{"nameParsed":{"literal":"Douglas Schuster","given":"Douglas","family":"Schuster"},"name":"Douglas Schuster","id":"contributors-myst-generated-uid-8"},{"nameParsed":{"literal":"Justin Hiemstra","given":"Justin","family":"Hiemstra"},"name":"Justin Hiemstra","id":"contributors-myst-generated-uid-9"},{"nameParsed":{"literal":"Joanmarie Del Vecchio","given":"Joanmarie Del","family":"Vecchio"},"name":"Joanmarie Del Vecchio","id":"contributors-myst-generated-uid-10"},{"nameParsed":{"literal":"Kibiwott Koech","given":"Kibiwott","family":"Koech"},"name":"Kibiwott Koech","id":"contributors-myst-generated-uid-11"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/osdf-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/projectpythia/osdf-cookbook/blob/main/notebooks/01_pelicanfs.ipynb","edit_url":"https://github.com/projectpythia/osdf-cookbook/edit/main/notebooks/01_pelicanfs.ipynb","exports":[{"format":"ipynb","filename":"01_pelicanfs.ipynb","url":"/osdf-cookbook/build/01_pelicanfs-dc562481a8b5d4eb6ebe533033192b1c.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LO8N7betrF"}],"key":"lTIAQ4drkd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cqyUUXHzXy"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"VL9YtjVzyQ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now that you’ve learned about the OSDF and the Pelican command line client, you may be wondering how you can easily access that data from within a notebook using python.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"aoxtqe0sOu"}],"key":"jy9mUfuN5U"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"You can do this using ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"XEGCYGElwN"},{"type":"inlineCode","value":"PelicanFS","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"T3P57J5OT6"},{"type":"text","value":", which is an ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"WKZgePfXXP"},{"type":"inlineCode","value":"FSSPec","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"CEqMykEM1k"},{"type":"text","value":" implementation of the Pelican client.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JiKo77JuZE"}],"key":"SKQJpqyZGt"},{"type":"heading","depth":3,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This notebook will contain:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"a9ZUzpBKUZ"}],"identifier":"this-notebook-will-contain","label":"This notebook will contain:","html_id":"this-notebook-will-contain","implicit":true,"key":"Dqd9mZxfy6"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A brief explanation of FSSPec and PelicanFS","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"SUZ7touWqU"}],"key":"mfa9eugxyH"}],"key":"Nlxx0Cn050"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A real-world example using FSSPec, Pelican, Xarray, and Zarr","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"s3CObw7dQX"}],"key":"UMTMzhmYyC"}],"key":"Poc3Y15vgk"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Other common access patterns","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"WDoLlpoS4a"}],"key":"eK4DYKs2vC"}],"key":"iJ9WBA4pBt"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"FAQs","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mvKIt1mGkJ"}],"key":"JA2uKFdAQt"}],"key":"JZPVeFJhOp"}],"key":"J131zlbUeJ"}],"key":"x1mB9naCY1"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fcpu86UI0Z"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"ZzeqTlTpLB"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To better understand this notebook, please familiarize yourself with the following concepts:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RIgJr9XLJR"}],"key":"lnvlYQgTpe"},{"type":"table","position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"r4YMOgvpva"}],"key":"C5RfXWkW0Z"},{"type":"tableCell","header":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QzrWF9OfjR"}],"key":"pldDkMB4pL"},{"type":"tableCell","header":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"G29UJmiVKF"}],"key":"iUEvgCfJya"}],"key":"FFBn8JZVs6"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"http://projectpythia.org/osdf-cookbook/notebooks/osdf-intro/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Intro to OSDF","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"hi8Gd51KP9"}],"urlSource":"http://projectpythia.org/osdf-cookbook/notebooks/osdf-intro/","key":"JUeachRRc7"}],"key":"kvMB576sV6"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Hz4fe3ZzHC"}],"key":"NcezrXez53"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[],"key":"bsWwKd7Qjl"}],"key":"LKE8Z6pdw8"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/xarray/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Understanding of Xarray","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"TiJt4HQOQ8"}],"urlSource":"https://foundations.projectpythia.org/core/xarray/","key":"KzfwYIAHFZ"}],"key":"uECgemYZhF"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"rcieMhiXoJ"}],"key":"zzQLgDK4LA"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"To better understand the example workflow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"rBCXEyjhFB"}],"key":"m0RIMyXYSl"}],"key":"ErWSw69xsd"},{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"link","url":"https://filesystem-spec.readthedocs.io/en/latest/","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Overview of FSSpec","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"xKqx1Qabgx"}],"urlSource":"https://filesystem-spec.readthedocs.io/en/latest/","key":"FxH9AB2FII"}],"key":"gS5FF9Z4oz"},{"type":"tableCell","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"dGNWIkUVxM"}],"key":"azgzkXJryf"},{"type":"tableCell","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"To better understand the FSSpec library","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"I0MF4i2Ho5"}],"key":"DgAAhbTc14"}],"key":"JUPBeog4fJ"}],"key":"sHC9sv15VJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"VLUlG91BTB"}],"key":"S3kfa2eY3B"},{"type":"text","value":": 20-30 minutes","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"QNDdi1tE6j"}],"key":"LWHMcftgAz"}],"key":"gwd08gbp8t"}],"key":"gpmU9uRdek"}],"key":"MocdjJdcGs"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"h7GRtSNJyP"}],"key":"EJUQwhDO2i"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xNDNAKvqzX"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"PJT3EGr4ng"}],"key":"IKKisRCjdY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\nimport metpy.calc as mpcalc\nfrom metpy.units import units\nimport fsspec\nimport intake","key":"Xam6dSyIbA"},{"type":"output","id":"0msJGgRQMwdaE8yaKiJOa","data":[],"key":"xk4cDQwyZt"}],"key":"ZcNykDdCuf"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What are PelicanFS and FSSPec?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fLBrXKNZ0d"}],"identifier":"what-are-pelicanfs-and-fsspec","label":"What are PelicanFS and FSSPec?","html_id":"what-are-pelicanfs-and-fsspec","implicit":true,"key":"yWPdUjSILJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, let’s understand PelicanFS and how it integrates with FSSpec","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"v78E0K81NM"}],"key":"Z8TEwGjq19"}],"key":"vJ4QXBEsCH"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"FSSPec","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cQ5qW0JTju"}],"identifier":"fsspec","label":"FSSPec","html_id":"fsspec","implicit":true,"key":"gLy4KU0eiR"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"FileSystem Spec (fsspec) is a python library which endeavors to provide a unified interface to many different storage backends. This includes, but is not limited to, POSIX, https, and S3. It’s used by various data processing libraries such as ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"I7WtL3d08M"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nb3qqma4cb"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cy1cVcoH71"},{"type":"inlineCode","value":"pandas","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Nw80VZbx6y"},{"type":"text","value":", and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jl34xldf9M"},{"type":"inlineCode","value":"intake","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qRhOO1z1qm"},{"type":"text","value":", just to name a few.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"o07DRsoLsg"}],"key":"yzOmHwgofs"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"To learn more about FSSPec, visit its ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"q1tzcucKnW"},{"type":"link","url":"https://filesystem-spec.readthedocs.io/en/latest/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"information page","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NApOV95Wl6"}],"urlSource":"https://filesystem-spec.readthedocs.io/en/latest/","key":"eMJByBcGEY"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"c2TUiqsYRk"}],"key":"ypRp1Bc3UX"},{"type":"heading","depth":4,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Schemes","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"r8cj5ht4uD"}],"identifier":"schemes","label":"Schemes","html_id":"schemes","implicit":true,"key":"noHE3qZDCE"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"FSSpec figures out how to interact with data from different storage backends through the scheme in the data path. For example, FSSpec knows to use the “Hyper Text Transfer Protocol” interface whenever it sees URLs with the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BT8kLBaw7s"},{"type":"inlineCode","value":"https:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"gtTqiO5xQ3"},{"type":"text","value":" scheme. This lets users interact with data from a variety of storage technologies without forcing them to know how those technologies work under the hood.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"f14cgOTrdN"}],"key":"qEUXoYP7nR"},{"type":"heading","depth":3,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"PelicanFS","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"TBVUelxJv4"}],"identifier":"pelicanfs","label":"PelicanFS","html_id":"pelicanfs","implicit":true,"key":"Np9sAqlfcS"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"PelicanFS is an implementation of FSSpec that introduces two new schemes to FSSpec: ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"tx6uCassiD"},{"type":"inlineCode","value":"pelican","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"PM48Rsk7Wz"},{"type":"text","value":" and ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"F4kgtZ7z3s"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"rlhYh1LR1k"},{"type":"text","value":". PelicanFS enables you to use the ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"rZmdEW8oD8"},{"type":"inlineCode","value":"pelican://","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"GXN04zE5WY"},{"type":"text","value":" scheme to access data via Pelican Federations like the OSDF in any software that already understands FSSpec. To use it, you must specify the federation host name. A Pelican path looks like:","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"gavbFmaSsB"}],"key":"cIV1nyBZD1"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"inlineCode","value":"pelican://<federation-host-name>/<namespace-path>","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"fASkxbZukS"}],"key":"y31LN6SDNk"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"hJ0dhTrpSC"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"z4Ulddj0dU"},{"type":"text","value":" scheme is a specific instance of the ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"yCf52h8VRk"},{"type":"inlineCode","value":"pelican","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"TprwYWBa1O"},{"type":"text","value":" scheme that knows how to access the OSDF. A path using the ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"rYy7vFwAT5"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"FmHhmMQJk6"},{"type":"text","value":" scheme ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"NClugaM3u9"},{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"should not","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"rTOHq10cMd"}],"key":"Rw84M1yIIi"},{"type":"text","value":" provide the federation root. An OSDF path looks like:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"vFSvAhO9RP"}],"key":"ShCv1sD8fx"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"inlineCode","value":"osdf:///<namespace-path>","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"oBRPVJxqYH"}],"key":"iR6pOKeoMH"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"PelicanFS teaches FSSpec how to interact with the Pelican protocol using the above pelican:-schemed or osdf:-schemed URLs.","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"m0xIYcaZRQ"}],"key":"QyAEC04AHw"}],"key":"my3p0I1Pvu"},{"type":"block","kind":"notebook-content","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"xGczpiTG6t"}],"key":"ibBo2WHIZr"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Notice the three ‘/’ after “osdf:”. This is required for a properly-formed osdf path.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Ht6fVAeHIg"}],"key":"iXOXUBQgmi"}],"key":"eVhp4d5pcZ"}],"key":"bd6HzYVtg1"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you’d like to understand more about how pelican works, check out the documentation ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LSWOLty5u3"},{"type":"link","url":"https://docs.pelicanplatform.org/about-pelican/core-concepts","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KhWBqPlszv"}],"urlSource":"https://docs.pelicanplatform.org/about-pelican/core-concepts","key":"DzumhOHUZY"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"I53TVQhtvv"}],"key":"lZYqvrevC0"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Putting it all together","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qKoT3152m2"}],"identifier":"putting-it-all-together","label":"Putting it all together","html_id":"putting-it-all-together","implicit":true,"key":"cJKb4uOjg8"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"What does this mean in practice?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QRMojhePCU"}],"key":"NxbWtRmyyr"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"If you want to access data from the OSDF using FSSpec or any library that uses FSSpec, build the osdf-schemed URL for the data and use that URL as your data path and then FSSpec and PelicanFS will do all the work to resolve it behind the scenes.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"IQjGdMnMhN"}],"key":"Tk35Rl74T1"}],"key":"ogxoRQ6zc8"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lXENeCTDYN"}],"key":"MoU0YTNhk8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A PelicanFS Example using Real Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rLWMUxVhF0"}],"identifier":"a-pelicanfs-example-using-real-data","label":"A PelicanFS Example using Real Data","html_id":"a-pelicanfs-example-using-real-data","implicit":true,"key":"H3VhztZ1T0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The following is an example that shows how PelicanFS works on real world data using FSSPec and Xarray to access Zarr data from AWS.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"C3WzOc3yJe"}],"key":"XcO0WrXL8i"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This portion of the notebook is based off of the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sgUu5scoEp"},{"type":"link","url":"https://projectpythia.org/HRRR-AWS-cookbook/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Project Pythia HRRR AWS Cookbook","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Wxl0Wfu1GD"}],"urlSource":"https://projectpythia.org/HRRR-AWS-cookbook/","key":"PygUZC7ryi"}],"key":"rYUiEXH17G"}],"key":"gC6xOcpNlX"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setting the Proper Path","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NM3kUDmztv"}],"identifier":"setting-the-proper-path","label":"Setting the Proper Path","html_id":"setting-the-proper-path","implicit":true,"key":"TgshQXRxCh"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The data for this tutorial is part of AWS Open Data, hosted in the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"QTjEuxR4lZ"},{"type":"inlineCode","value":"us-west-1","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"od8XVXeglq"},{"type":"text","value":" region. The OSDF provides access to that region using the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mcEV13kFtt"},{"type":"inlineCode","value":"/aws-opendata/us-west-1","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"RuDfXYRh1c"},{"type":"text","value":" namespace.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"e33tYsCvPm"}],"key":"fTaYUeKiEE"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Let’s first create a path which uses the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"rt6DGdvEN2"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"voglANagMC"},{"type":"text","value":" scheme.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Mc8JSoMlhB"}],"key":"WKllsiI9Rp"}],"key":"xzbViJ0KaI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Set the date, hour, variable, and level for the HRRR data\ndate = '20211016'\nhour = '21'\nvar = 'TMP'\nlevel = '2m_above_ground'\n\n# Construct object paths for the Zarr datasets using the osdf scheme\nnamespace_object1 = f'osdf:///aws-opendata/us-west-1/hrrrzarr/sfc/{date}/{date}_{hour}z_anl.zarr/{level}/{var}/{level}/'\nnamespace_object2 = f'osdf:///aws-opendata/us-west-1/hrrrzarr/sfc/{date}/{date}_{hour}z_anl.zarr/{level}/{var}/'","key":"xawJcYTPVR"},{"type":"output","id":"RsfoNsGte4oGyjZKnwpE0","data":[],"key":"t6alWUD001"}],"key":"r2gOi8MUuc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Using FSSpec to access the data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ba6P5hmqmO"}],"identifier":"using-fsspec-to-access-the-data","label":"Using FSSpec to access the data","html_id":"using-fsspec-to-access-the-data","implicit":true,"key":"DA3INZu2ta"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we can access the data using XArray as usual. The two objects will be accessed using fsspec’s ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yIPw4m11A4"},{"type":"inlineCode","value":"get_mapper","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aUFw8P5VcP"},{"type":"text","value":" function, which knows to use PelicanFS because we created the path using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bBTPOe646j"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DFlNZ8COM6"},{"type":"text","value":" scheme.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RXTqHjtY5h"}],"key":"D1q3Idy662"}],"key":"ip9DD4wzek"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Get mappers for the Zarr datasets\n\nobject1 = fsspec.get_mapper(namespace_object1)\nobject2 = fsspec.get_mapper(namespace_object2)\n\n# Open the datasets\nds = xr.open_mfdataset([object1, object2], engine='zarr', decode_timedelta=True)\n\n# Display the dataset\nds","key":"IVNPsjdIME"},{"type":"output","id":"xFlPzIg2v5LVXiomsvlHl","data":[{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 4MB\nDimensions:                  (projection_y_coordinate: 1059,\n                              projection_x_coordinate: 1799)\nCoordinates:\n  * projection_x_coordinate  (projection_x_coordinate) float64 14kB -2.698e+0...\n  * projection_y_coordinate  (projection_y_coordinate) float64 8kB -1.587e+06...\nData variables:\n    TMP                      (projection_y_coordinate, projection_x_coordinate) float16 4MB dask.array<chunksize=(150, 150), meta=np.ndarray>\n    forecast_period          timedelta64[ns] 8B ...\n    forecast_reference_time  datetime64[ns] 8B ...\n    height                   float64 8B ...\n    pressure                 float64 8B ...\n    time                     datetime64[ns] 8B ...","content_type":"text/plain"},"text/html":{"content_type":"text/html","hash":"59db36ee52d02dd7f6dec02be02b742b","path":"/osdf-cookbook/build/59db36ee52d02dd7f6dec02be02b742b.html"}}}],"key":"NLDXPFi1dx"}],"key":"ceK74vaoKN"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Continue the workflow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JwqPxYHdQR"}],"identifier":"continue-the-workflow","label":"Continue the workflow","html_id":"continue-the-workflow","implicit":true,"key":"XtSVya5Bim"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"As you can see, Xarray streamed the data correctly into the datasets. To prove the workflow works, the next cell continues the computation and generates two plots. This tutorial will not go in depth as to what this code is accomplishing.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"iSPTdvrQuJ"}],"key":"WJdw8SARmX"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"If you’d like to know more about the following workflow, please refer to the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"vfVxyx7B3s"},{"type":"link","url":"https://projectpythia.org/HRRR-AWS-cookbook/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Project Pythia HRRR AWS Cookbook","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"GDz0Fn949G"}],"urlSource":"https://projectpythia.org/HRRR-AWS-cookbook/","key":"cZNGGSG2ql"}],"key":"kBKGU4cwKA"}],"key":"aBTs0Dabxa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Define coordinates for projection\nlon1 = -97.5\nlat1 = 38.5\nslat = 38.5\n\n# Define the Lambert Conformal projection\nprojData = ccrs.LambertConformal(\n    central_longitude=lon1,\n    central_latitude=lat1,\n    standard_parallels=[slat, slat],\n    globe=ccrs.Globe(\n        semimajor_axis=6371229,\n        semiminor_axis=6371229\n    )\n)\n\n# Display dataset coordinates\nds.coords\n\n# Extract temperature data\nairTemp = ds.TMP\n\n# Display the temperature data\nairTemp\n\n# Convert temperature units to Celsius\nairTemp = airTemp.metpy.convert_units('degC')\n\n# Display the converted temperature data\nairTemp\n\n# Extract projection coordinates\nx = airTemp.projection_x_coordinate\ny = airTemp.projection_y_coordinate\n\n# Plot temperature data\nairTemp.plot(figsize=(11, 8.5))\n\n# Compute minimum and maximum temperatures\nminTemp = airTemp.min().compute()\nmaxTemp = airTemp.max().compute()\n\n# Display minimum and maximum temperature values\nminTemp.values, maxTemp.values\n\n# Define contour levels\nfint = np.arange(np.floor(minTemp.values), np.ceil(maxTemp.values) + 2, 2)\n\n# Define plot bounds and resolution\nlatN = 50.4\nlatS = 24.25\nlonW = -123.8\nlonE = -71.2\nres = '50m'\n\n# Create a figure and axis with projection\nfig = plt.figure(figsize=(18, 12))\nax = plt.subplot(1, 1, 1, projection=projData)\nax.set_extent([lonW, lonE, latS, latN], crs=ccrs.PlateCarree())\nax.add_feature(cfeature.COASTLINE.with_scale(res))\nax.add_feature(cfeature.STATES.with_scale(res))\n\n# Add the title\ntl1 = 'HRRR 2m temperature ($^\\\\circ$C)'\ntl2 = f'Analysis valid at: {hour}00 UTC {date}'\nplt.title(f'{tl1}\\n{tl2}', fontsize=16)\n\n# Contour fill\nCF = ax.contourf(x, y, airTemp, levels=fint, cmap=plt.get_cmap('coolwarm'))\n\n# Make a colorbar for the ContourSet returned by the contourf call\ncbar = fig.colorbar(CF, shrink=0.5)\ncbar.set_label(r'2m Temperature ($^\\circ$C)', size='large')\n\n# Show the plot\nplt.show()","key":"L5KFsGtatc"},{"type":"output","id":"DlC2L_iovywZ4qgg52x2s","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1100x850 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"210f7f65ea77250ecec49bdfe75b3037","path":"/osdf-cookbook/build/210f7f65ea77250ecec49bdfe75b3037.png"}}},{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/cartopy/io/__init__.py:242: DownloadWarning: Downloading: https://naturalearth.s3.amazonaws.com/50m_physical/ne_50m_coastline.zip\n  warnings.warn(f'Downloading: {url}', DownloadWarning)\n"},{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/cartopy/io/__init__.py:242: DownloadWarning: Downloading: https://naturalearth.s3.amazonaws.com/50m_cultural/ne_50m_admin_1_states_provinces_lakes.zip\n  warnings.warn(f'Downloading: {url}', DownloadWarning)\n"},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1800x1200 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"6446427238985c0494850f43d728bfbf","path":"/osdf-cookbook/build/6446427238985c0494850f43d728bfbf.png"}}}],"key":"ubGAhaz7tr"}],"key":"yD9VG8tDp4"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ibuTqvWTDw"}],"key":"mRgRzNj67z"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Other Ways to Access","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uVMnh7kTfd"}],"identifier":"other-ways-to-access","label":"Other Ways to Access","html_id":"other-ways-to-access","implicit":true,"key":"R4dW1qX9TA"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"There are other common ways to access data and use data with FSSpec and PelicanFS. This section will will cover the following topics","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gW1POi73Xj"}],"key":"eEVCNtP1gU"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Using an Intake Catalog","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dppkC4BXme"}],"key":"Bo9PPETiV5"}],"key":"kmoviPRDWh"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Directly Accessing Data","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"S555xulml7"}],"key":"T1i7q8AS6q"}],"key":"N8OXLYbgRp"}],"key":"mArqFv7yCI"}],"key":"ZsVoU9W0yI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Intake Catalog","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CQ3X3m6s6O"}],"identifier":"intake-catalog","label":"Intake Catalog","html_id":"intake-catalog","implicit":true,"key":"sOP02upV2M"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In order to use PelicanFS with an Intake catalog, the paths in the catalog itself need to use the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"atb1FkyJRl"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oc9jzhOhwO"},{"type":"text","value":" or ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SJ52gdQZWb"},{"type":"inlineCode","value":"pelican","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"t4tgNRETKp"},{"type":"text","value":" schemes.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JOCPXz5rRp"}],"key":"fXIN2opeVS"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Here’s an example using the catalog located at ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"n5pohlMJuc"},{"type":"link","url":"https://data.rda.ucar.edu/d850001/catalogs/osdf/cmip6-aws/cmip6-osdf-zarr.json","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"https://​data​.rda​.ucar​.edu​/d850001​/catalogs​/osdf​/cmip6​-aws​/cmip6​-osdf​-zarr​.json","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Hc9dYHKYo1"}],"urlSource":"https://data.rda.ucar.edu/d850001/catalogs/osdf/cmip6-aws/cmip6-osdf-zarr.json","key":"OqJCBCnEEt"}],"key":"GEXFHGIaWU"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"An entry in the catalog’s csv file looks like:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"e88fqIaaky"}],"key":"i71GAXSwnb"}],"key":"xBRLUnNVvQ"},{"type":"block","kind":"notebook-content","children":[{"type":"code","lang":"","value":"HighResMIP,CMCC,CMCC-CM2-HR4,highresSST-present,r1i1p1f1,Amon,ta,gn,osdf:///aws-opendata/us-west-2/cmip6-pds/CMIP6/HighResMIP/CMCC/CMCC-CM2-HR4/highresSST-present/r1i1p1f1/Amon/ta/gn/v20170706/,,20170706","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"key":"BHUYGwOpFR"}],"key":"zggJ5jNb5D"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Notice how the path is using the ‘osdf’ scheme and the ‘/aws-opendata/us-west-2’ namespace. If all the paths in the csv file are formatted like this, then you can use the Intake catalog exactly as usual.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PEPP526HS7"}],"key":"b4JGTTk3VB"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Here is a workflow and plot which uses an Intake catalog and the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RTxRJPx4ZS"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QmXyXhqx12"},{"type":"text","value":" scheme. If you want to understand more about the underlying workflow, please look at the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Vz6Bi3G4yL"},{"type":"link","url":"http://projectpythia.org/osdf-cookbook/notebooks/cmip6-gmst/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Global Mean Surface Temperature Anomalies (GMSTA) from CMIP6 data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"V2BuBB1g0h"}],"urlSource":"http://projectpythia.org/osdf-cookbook/notebooks/cmip6-gmst/","key":"Zx8Pxcbu6r"},{"type":"text","value":" notebook.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"e5N130H3zA"}],"key":"CuxuB4CPen"}],"key":"heGcMSLmM0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"rda_url     =  'https://data.rda.ucar.edu/'\ncat_url     = rda_url +  'd850001/catalogs/osdf/cmip6-aws/cmip6-osdf-zarr.json'\n\ncol = intake.open_esm_datastore(cat_url)\n\nexpts = ['historical']\n\nquery = dict(\n    experiment_id=expts,\n    table_id='Amon',\n    variable_id=['tas'],\n    member_id = 'r1i1p1f1',\n    #activity_id = 'CMIP',\n)\n\ncol_subset = col.search(require_all_on=[\"source_id\"], **query)\n\nds = xr.open_zarr(col_subset.df['zstore'][0])\n\nds.tas.isel(time=0).plot()","key":"DLN9G0vIVI"},{"type":"output","id":"NEScLoF-yTPfPBlZEy3Ph","data":[{"output_type":"stream","name":"stderr","text":"/home/runner/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/intake_esm/__init__.py:6: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.\n  from pkg_resources import DistributionNotFound, get_distribution\n"},{"output_type":"error","traceback":"\u001b[31m--------------------------------------------------------...","ename":"ClientPayloadError","evalue":"Failed to decode variable 'time': Response payload is not completed: <ContentLengthError: 400, message='Not enough data to satisfy content length header.'>","hash":"0de31861950276e895727c902fad7783","path":"/osdf-cookbook/build/0de31861950276e895727c902fad7783.txt"}],"key":"NZHpAsA6oG"}],"key":"ZwzRydgArq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Direct Access of Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zbeY4TykKX"}],"identifier":"direct-access-of-data","label":"Direct Access of Data","html_id":"direct-access-of-data","implicit":true,"key":"uueWedVgYU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can also access the data directly using normal file system calls.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nlmcCNUmWl"}],"key":"Awu10DrQdD"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"For example, let’s say you want to read in a csv object from the OSDF. Just use the same pattern we’ve shown before of","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WyQ5eIhVZ6"}],"key":"vIA6FyOZ9q"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"osdf:///<namespace-path>","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"V2SHXkQxmo"}],"key":"GbtPfjvEpu"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"for your path.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"LNU9G1TAsN"}],"key":"MGrsODdKu5"}],"key":"BiMI5HiwMh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"with fsspec.open('osdf:///ndp/burnpro3d/YosemiteBurnExample/burnpro3d-yosemite-example.csv') as ex_csv:\n    content = ex_csv.read()\n    print(content.decode())","key":"ECMBct6N4r"},{"type":"output","id":"aG4B4C9O1Z_ezYenY7GET","data":[],"key":"OX13Zfi1eu"}],"key":"dBtglHqZUe"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PR60xBUrl3"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"loGGZo4vu7"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this notebook we demonstrated how to use PelicanFS and gave an overview of a few different common usages. The main example showed how to use PelicanFS and Xarray to open a Zarr store. We also showed how to use PelicanFS and an intake catalog.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yE3eW4ZL6O"}],"key":"VWhxzGtGpg"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s next?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"bPceLhsgjN"}],"identifier":"whats-next","label":"What’s next?","html_id":"whats-next","implicit":true,"key":"AetSeBkIwU"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The following notebooks all demonstrate various workflows which will use PelicanFS to access data from the OSDF.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"i4H8qXzntx"}],"key":"aF5vUBs115"}],"key":"icCEmrIBK5"}],"key":"aTWFG2ZHS7"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Streaming Data with the Open Science Data Federation (OSDF)","url":"/notebooks/osdf-intro","group":"Introduction to OSDF"},"next":{"title":"Introduction to NSF NCAR’s Geoscience Data Exhcange","url":"/notebooks/ncar-intro","group":"NCAR examples"}}},"domain":"http://localhost:3000"}