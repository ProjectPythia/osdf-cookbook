{"version":2,"kind":"Notebook","sha256":"2ab4d0e1cbb7549924ffcd78b10415c4de4b18e9247c7bd7c2f0923c98c8e046","slug":"notebooks.sonarai-technical","location":"/notebooks/04_SonarAI_Technical.ipynb","dependencies":[],"frontmatter":{"title":"SonarAI Technical Notebook","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Harsha R. Hampapura","given":"Harsha R.","family":"Hampapura"},"name":"Harsha R. Hampapura","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Brian Bockelman","given":"Brian","family":"Bockelman"},"name":"Brian Bockelman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Alexander Hoelzeman","given":"Alexander","family":"Hoelzeman"},"name":"Alexander Hoelzeman","id":"contributors-myst-generated-uid-2"},{"nameParsed":{"literal":"Emma Turetsky","given":"Emma","family":"Turetsky"},"name":"Emma Turetsky","id":"contributors-myst-generated-uid-3"},{"nameParsed":{"literal":"Amandha Wingert Barok","given":"Amandha Wingert","family":"Barok"},"name":"Amandha Wingert Barok","id":"contributors-myst-generated-uid-4"},{"nameParsed":{"literal":"Aashish Panta","given":"Aashish","family":"Panta"},"name":"Aashish Panta","id":"contributors-myst-generated-uid-5"},{"nameParsed":{"literal":"Riley Conroy","given":"Riley","family":"Conroy"},"name":"Riley Conroy","id":"contributors-myst-generated-uid-6"},{"nameParsed":{"literal":"Douglas Schuster","given":"Douglas","family":"Schuster"},"name":"Douglas Schuster","id":"contributors-myst-generated-uid-7"},{"nameParsed":{"literal":"Justin Hiemstra","given":"Justin","family":"Hiemstra"},"name":"Justin Hiemstra","id":"contributors-myst-generated-uid-8"},{"nameParsed":{"literal":"Kibiwott Koech","given":"Kibiwott","family":"Koech"},"name":"Kibiwott Koech","id":"contributors-myst-generated-uid-9"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/osdf-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/osdf-cookbook/blob/main/notebooks/04_SonarAI_Technical.ipynb","exports":[{"format":"ipynb","filename":"04_SonarAI_Technical.ipynb","url":"/osdf-cookbook/build/04_SonarAI_Technical-29efc684789bef8f8b4d32519905ed8a.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Notebook Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H3lRQ7RKHm"}],"identifier":"notebook-overview","label":"Notebook Overview","html_id":"notebook-overview","implicit":true,"key":"VYnpVvod52"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In this notebook, we aim to investigate potential correlations between environmental variables derived from NCAR datasets—such as ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zqNEYByRZc"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Sea Surface Temperature","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tPJLx7Zih6"}],"key":"c8Y4sXJZ6o"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"j9XDZotBAc"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Mean Evaporation Rate","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oMpEZJKw85"}],"key":"nsRZBzQfp5"},{"type":"text","value":"(tbd) — and the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WiEfLEpHz0"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"abundance of fish observed within the water column","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MDalI5uzy7"}],"key":"SMkCxxW0NX"},{"type":"text","value":", as recorded by sonar.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hieXjEYGxu"}],"key":"Jmb3UPYKoO"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GvtvLaDkzc"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"sonar dataset","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rXXvyK2bVF"}],"key":"EVYGRbXjt3"},{"type":"text","value":" was collected by ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MTQZOabMRv"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"NOAA Fisheries","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Pbowc7znBj"}],"key":"g72xwTwIqd"},{"type":"text","value":" during a research cruise conducted aboard the vessel ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"K4JEwCAQqC"},{"type":"emphasis","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"H.B. Bigelow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"NWj9hUfXgH"}],"key":"kQfnQp8QKG"},{"type":"text","value":" between ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IY50KN5pIc"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"October and November 2019","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yYQgDvxRWB"}],"key":"toUCgmwn1i"},{"type":"text","value":". To facilitate analysis, we integrate this dataset with two NCAR environmental datasets (","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"q0Xq40TEa3"},{"type":"emphasis","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"[tbd]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EhMOeZAGte"}],"key":"h2tP6a5rbT"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"U2RcyZpT5l"},{"type":"emphasis","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"[tbd]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"JOYijSanJu"}],"key":"Bb9qMnVn08"},{"type":"text","value":"), aligning them both ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gKSso4qCuh"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"spatially","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SpJvboYOde"}],"key":"S8eMmxcrai"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KMxUbQK29x"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"temporally","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KbHLuGtgsT"}],"key":"p22Xattiyn"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"igyFuV28t4"}],"key":"HvHRmQNSbh"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"This integration enables us to examine statistical relationships between physical oceanographic conditions and fish distribution patterns.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Bd4Abi1yGC"}],"key":"XkUsxE8sER"},{"type":"heading","depth":3,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Notebook Structure","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"gD1Mdhq3OM"}],"identifier":"notebook-structure","label":"Notebook Structure","html_id":"notebook-structure","implicit":true,"key":"muCBrciWP9"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"e6cFIWjyiY"}],"key":"YXasJi51Zk"}],"key":"dfbkgnGYYA"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Data Loading","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"I8sJyu55id"}],"key":"oHAe8ajvdX"}],"key":"kIhLgj6Odk"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Data Preprocessing","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"b5EaAk16fi"}],"key":"je8LsR4g5o"}],"key":"r1Mmy4Wkj8"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Data Visualization","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"sB7x6apJQW"}],"key":"Q2ti7Bsy9d"}],"key":"XCL1goTrZp"}],"key":"MTtk7PGXYc"}],"key":"TBEjy4REFB"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pPp3bOhz0N"}],"key":"UtBe5LqWwC"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jfh71qe8ph"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"QgYmgDCpsC"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This section was inspired by ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kybcwLRgm6"},{"type":"link","url":"https://github.com/alan-turing-institute/the-turing-way/blob/master/book/templates/chapter-template/chapter-landing-page.md","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"this template","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"mDgSh7r3qs"}],"urlSource":"https://github.com/alan-turing-institute/the-turing-way/blob/master/book/templates/chapter-template/chapter-landing-page.md","data":{"kind":"file","org":"alan-turing-institute","repo":"the-turing-way","reference":"master","file":"book/templates/chapter-template/chapter-landing-page.md","raw":"https://raw.githubusercontent.com/alan-turing-institute/the-turing-way/master/book/templates/chapter-template/chapter-landing-page.md"},"internal":false,"protocol":"github","key":"SAm2Y9eK5T"},{"type":"text","value":" of the wonderful ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"G38h3PlLjE"},{"type":"link","url":"https://the-turing-way.netlify.app","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The Turing Way","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"px4Z3jyr3I"}],"urlSource":"https://the-turing-way.netlify.app","key":"ZsEnb5ZDak"},{"type":"text","value":" Jupyter Book.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"E03TrFI8RQ"}],"key":"BLNlUtAhyI"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Following your overview, tell your reader what concepts, packages, or other background information they’ll ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ZRdTKT0N5l"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"need","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"KkcRKVxtXs"}],"key":"Z2NjivG1pb"},{"type":"text","value":" before learning your material. Tie this explicitly with links to other pages here in Foundations or to relevant external resources. Remove this body text, then populate the Markdown table, denoted in this cell with ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JW2AWXaAm1"},{"type":"inlineCode","value":"|","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"IpMN0hzcKa"},{"type":"text","value":" vertical brackets, below, and fill out the information following. In this table, lay out prerequisite concepts by explicitly linking to other Foundations material or external resources, or describe generally helpful concepts.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mzZz6vCccJ"}],"key":"JnesYhPCST"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Label the importance of each concept explicitly as ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"peQA9Z9c79"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"helpful/necessary","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"JxN61XS891"}],"key":"r3TSpUjUFv"},{"type":"text","value":".","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"krhk88us2D"}],"key":"fAeMAaEzEM"},{"type":"table","position":{"start":{"line":8,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"wQIEaIywAh"}],"key":"uDxSFoZQA0"},{"type":"tableCell","header":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"YUN5ctRaW5"}],"key":"pz5ZUqWVoM"},{"type":"tableCell","header":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"j7uziAxuux"}],"key":"dmlC0AcseJ"}],"key":"xdYyxabwlM"},{"type":"tableRow","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/cartopy/cartopy","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Intro to Cartopy","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ozNMVM9sby"}],"urlSource":"https://foundations.projectpythia.org/core/cartopy/cartopy","key":"C9pzbtDrVr"}],"key":"dtHqFsdO0Q"},{"type":"tableCell","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"g1r38OSoPx"}],"key":"iy1SQrj97w"},{"type":"tableCell","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[],"key":"RO0i1nsycf"}],"key":"X0ohmFCDPP"},{"type":"tableRow","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/data-formats/netcdf-cf","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Understanding of NetCDF","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"bMptdqWu0F"}],"urlSource":"https://foundations.projectpythia.org/core/data-formats/netcdf-cf","key":"fEIZN1viXL"}],"key":"miOHLhzHyI"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"H3QmxjbT1Z"}],"key":"W08Mp2p4Rx"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Familiarity with metadata structure","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"gpcW1bTlig"}],"key":"WVBGWKMDrz"}],"key":"hskNM7lIAz"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Project management","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Rktc0uPod3"}],"key":"OM4BQMzEpK"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"C0mM10qJJ0"}],"key":"PLcE1IfoQr"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[],"key":"P7Cx8Op4Gn"}],"key":"b4oT9dYUGi"}],"key":"vLRpXU3rGh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"AlLPwn73yy"}],"key":"r6TIxF553e"},{"type":"text","value":": estimate in minutes. For a rough idea, use 5 mins per subsection, 10 if longer; add these up for a total. Safer to round up and overestimate.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Wtb8SeBAp8"}],"key":"N24uPp8vl5"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"System requirements","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"MCu4zDzZ09"}],"key":"f6GCmQbGFq"},{"type":"text","value":":","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"IBgAREzsV7"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Populate with any system, version, or non-Python software requirements if necessary","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"OqD2jVytLd"}],"key":"d8U4FUYFK7"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Otherwise use the concepts table above and the Imports section below to describe required packages as necessary","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"sZQ5D5UvTW"}],"key":"hohZxWG82p"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"If no extra requirements, remove the ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Uokm6qLeqN"},{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"System requirements","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"pEmrOMnwzY"}],"key":"EkZcdLpbxF"},{"type":"text","value":" point altogether","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"DncoZbMzqR"}],"key":"oSysP7KrER"}],"key":"awWfP7XqGG"}],"key":"VhDPwSbx6Y"}],"key":"IakgWEjJok"}],"key":"HKKVFOcOVd"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"d1nbkx2tc1"}],"key":"MLagJM9j77"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mC3LA9r8br"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"S594fhkwpr"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Begin your body of content with another ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"V3kmI1ofsj"},{"type":"inlineCode","value":"---","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"f1AkLaVPMX"},{"type":"text","value":" divider before continuing into this section, then remove this body text and populate the following code cell with all necessary Python imports ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"L7WAWVQDhp"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"up-front","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"owW26PcCid"}],"key":"D5ljzrqOcj"},{"type":"text","value":":","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"uG6mGnW6R0"}],"key":"KOlNuo8Oza"}],"key":"U76MbJFW8t"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2025-08-08T15:51:43.419373Z","start_time":"2025-08-08T15:51:40.783143Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport s3fs\nimport numpy as np\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\nimport pandas as pd\nimport requests\nimport io\nimport os","key":"H1mfqVcWSu"},{"type":"output","id":"tz8HcAGCbn4MRkGyVrEp6","data":[],"key":"TdBc99qsVr"}],"key":"VZqACqwYuC"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Initializing the datasets","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XLB9y4qdn5"}],"identifier":"initializing-the-datasets","label":"Initializing the datasets","html_id":"initializing-the-datasets","implicit":true,"key":"SNeK5dzVoC"}],"key":"BoHDbr28zF"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"All datasets are accessed using the OSDF infrastructure","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FK0F0fOtEj"}],"key":"xow5w0U8QL"}],"key":"SJ3OwwrUXf"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2025-08-08T15:54:02.714159Z","start_time":"2025-08-08T15:51:43.429275Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"bucket_name = 'noaa-wcsd-zarr-pds'\nship_name = \"Henry_B._Bigelow\"\ncruise_name = \"HB1906\"\nsensor_name = \"EK60\"\n\n# Accessing the NOAA HB1906 dataset using OSDF\ns3_file_system = s3fs.S3FileSystem(anon=True)\nzarr_store = f'{cruise_name}.zarr'\ns3_zarr_store_path = f\"{bucket_name}/level_2/{ship_name}/{cruise_name}/{sensor_name}/{zarr_store}\"\nstore = s3fs.S3Map(root=s3_zarr_store_path, s3=s3_file_system, check=False)\ncruise = xr.open_zarr(store=store, consolidated=None)\nstart_time = \"2019-10-16T15:00:00\"\nend_time = \"2019-10-16T23:30:00\"\ntimeslice = slice(start_time, end_time)\ndepths=slice(10, 250)\ncruise = cruise.sel(time=timeslice, depth=depths, drop=False)\ncruise = cruise.sel(frequency=38000, method='nearest').compute()\ncruise = cruise.where(cruise.depth < cruise.bottom, drop=True)\nhm_timestamps = cruise.time.values.tolist()\n\n# location of one specific buoy located on Georges Bank\ntarget_lon = 360 - 66.546\ntarget_lat = 41.088\nprint(f\"Target coordinates: Longitude: {target_lon}, Latitude: {target_lat}\")\n# Accessing stationary buoy data from a specific buoy located on Georges Bank, sampled daily\nbouy_data_day_before = xr.open_dataset(\n    'https://data.rda.ucar.edu/d277007/avhrr_v2.1/2019/oisst-avhrr-v02r01.20191015.nc#mode=bytes', engine='netcdf4')\nbuoy_data_actual_day = xr.open_dataset(\n    'https://data.rda.ucar.edu/d277007/avhrr_v2.1/2019/oisst-avhrr-v02r01.20191016.nc#mode=bytes',\n    engine='netcdf4')\nbuoy_data_day_after = xr.open_dataset(\n    'https://data.rda.ucar.edu/d277007/avhrr_v2.1/2019/oisst-avhrr-v02r01.20191017.nc#mode=bytes',\n    engine='netcdf4')\n\nsst_day_before = bouy_data_day_before['sst'].sel(lon=target_lon, lat=target_lat, method='nearest').values[0][0]\nsst_actual_day = buoy_data_actual_day['sst'].sel(lon=target_lon, lat=target_lat, method='nearest').values[0][0]\nsst_day_after = buoy_data_day_after['sst'].sel(lon=target_lon, lat=target_lat, method='nearest').values[0][0]\n# Accessing a second dataset from NCAR, gridded satellite data, sampled hourly\nurl = 'https://data-osdf.rda.ucar.edu/ncar/rda/d633000/kerchunk/meanflux/Mean_evaporation_rate-osdf.json'\nds = xr.open_dataset(url, engine='kerchunk')\n\nresponse = requests.get('https://data-osdf.rda.ucar.edu/ncar/rda/pythia_2025/osdf-cookbook/mae_error_map.npy')\nresponse.raise_for_status()\nerror_map = np.load(io.BytesIO(response.content))\n# return sst_day_before, sst_actual_day, sst_day_after, cruise","key":"OhcIAdjmhS"},{"type":"output","id":"qUZkdJwNHwubx3jSs2f5U","data":[{"output_type":"stream","name":"stdout","text":"Target coordinates: Longitude: 293.454, Latitude: 41.088\n"},{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mValueError\u001b[39m                                Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[2]\u001b[39m\u001b[32m, line 40\u001b[39m\n\u001b[32m     38\u001b[39m \u001b[38;5;66;03m# Accessing a second dataset from NCAR, gridded satellite data, sampled hourly\u001b[39;00m\n\u001b[32m     39\u001b[39m url = \u001b[33m'\u001b[39m\u001b[33mhttps://data-osdf.rda.ucar.edu/ncar/rda/d633000/kerchunk/meanflux/Mean_evaporation_rate-osdf.json\u001b[39m\u001b[33m'\u001b[39m\n\u001b[32m---> \u001b[39m\u001b[32m40\u001b[39m ds = \u001b[43mxr\u001b[49m\u001b[43m.\u001b[49m\u001b[43mopen_dataset\u001b[49m\u001b[43m(\u001b[49m\u001b[43murl\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mengine\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mkerchunk\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m)\u001b[49m\n\u001b[32m     42\u001b[39m response = requests.get(\u001b[33m'\u001b[39m\u001b[33mhttps://data-osdf.rda.ucar.edu/ncar/rda/pythia_2025/osdf-cookbook/mae_error_map.npy\u001b[39m\u001b[33m'\u001b[39m)\n\u001b[32m     43\u001b[39m response.raise_for_status()\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/xarray/backends/api.py:701\u001b[39m, in \u001b[36mopen_dataset\u001b[39m\u001b[34m(filename_or_obj, engine, chunks, cache, decode_cf, mask_and_scale, decode_times, decode_timedelta, use_cftime, concat_characters, decode_coords, drop_variables, create_default_indexes, inline_array, chunked_array_type, from_array_kwargs, backend_kwargs, **kwargs)\u001b[39m\n\u001b[32m    698\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m from_array_kwargs \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m    699\u001b[39m     from_array_kwargs = {}\n\u001b[32m--> \u001b[39m\u001b[32m701\u001b[39m backend = \u001b[43mplugins\u001b[49m\u001b[43m.\u001b[49m\u001b[43mget_backend\u001b[49m\u001b[43m(\u001b[49m\u001b[43mengine\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    703\u001b[39m decoders = _resolve_decoders_kwargs(\n\u001b[32m    704\u001b[39m     decode_cf,\n\u001b[32m    705\u001b[39m     open_backend_dataset_parameters=backend.open_dataset_parameters,\n\u001b[32m   (...)\u001b[39m\u001b[32m    711\u001b[39m     decode_coords=decode_coords,\n\u001b[32m    712\u001b[39m )\n\u001b[32m    714\u001b[39m overwrite_encoded_chunks = kwargs.pop(\u001b[33m\"\u001b[39m\u001b[33moverwrite_encoded_chunks\u001b[39m\u001b[33m\"\u001b[39m, \u001b[38;5;28;01mNone\u001b[39;00m)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/xarray/backends/plugins.py:202\u001b[39m, in \u001b[36mget_backend\u001b[39m\u001b[34m(engine)\u001b[39m\n\u001b[32m    200\u001b[39m     engines = list_engines()\n\u001b[32m    201\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m engine \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;129;01min\u001b[39;00m engines:\n\u001b[32m--> \u001b[39m\u001b[32m202\u001b[39m         \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mValueError\u001b[39;00m(\n\u001b[32m    203\u001b[39m             \u001b[33mf\u001b[39m\u001b[33m\"\u001b[39m\u001b[33munrecognized engine \u001b[39m\u001b[33m'\u001b[39m\u001b[38;5;132;01m{\u001b[39;00mengine\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m'\u001b[39m\u001b[33m must be one of your download engines: \u001b[39m\u001b[38;5;132;01m{\u001b[39;00m\u001b[38;5;28mlist\u001b[39m(engines)\u001b[38;5;132;01m}\u001b[39;00m\u001b[33m. \u001b[39m\u001b[33m\"\u001b[39m\n\u001b[32m    204\u001b[39m             \u001b[33m\"\u001b[39m\u001b[33mTo install additional dependencies, see:\u001b[39m\u001b[38;5;130;01m\\n\u001b[39;00m\u001b[33m\"\u001b[39m\n\u001b[32m    205\u001b[39m             \u001b[33m\"\u001b[39m\u001b[33mhttps://docs.xarray.dev/en/stable/user-guide/io.html \u001b[39m\u001b[38;5;130;01m\\n\u001b[39;00m\u001b[33m\"\u001b[39m\n\u001b[32m    206\u001b[39m             \u001b[33m\"\u001b[39m\u001b[33mhttps://docs.xarray.dev/en/stable/getting-started-guide/installing.html\u001b[39m\u001b[33m\"\u001b[39m\n\u001b[32m    207\u001b[39m         )\n\u001b[32m    208\u001b[39m     backend = engines[engine]\n\u001b[32m    209\u001b[39m \u001b[38;5;28;01melif\u001b[39;00m \u001b[38;5;28missubclass\u001b[39m(engine, BackendEntrypoint):\n\n\u001b[31mValueError\u001b[39m: unrecognized engine 'kerchunk' must be one of your download engines: ['netcdf4', 'h5netcdf', 'scipy', 'gini', 'store', 'zarr']. To install additional dependencies, see:\nhttps://docs.xarray.dev/en/stable/user-guide/io.html \nhttps://docs.xarray.dev/en/stable/getting-started-guide/installing.html","ename":"ValueError","evalue":"unrecognized engine 'kerchunk' must be one of your download engines: ['netcdf4', 'h5netcdf', 'scipy', 'gini', 'store', 'zarr']. To install additional dependencies, see:\nhttps://docs.xarray.dev/en/stable/user-guide/io.html \nhttps://docs.xarray.dev/en/stable/getting-started-guide/installing.html"}],"key":"XWEV7m7L7n"}],"key":"pJw5DOsvQq"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xnG6HxZKan"}],"key":"BBKns8PJp9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Preprocessing","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eA3gNu4hrP"}],"identifier":"preprocessing","label":"Preprocessing","html_id":"preprocessing","implicit":true,"key":"dm70DZQo06"}],"key":"Pj3oLAWZtE"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2025-08-08T15:55:22.075924Z","start_time":"2025-08-08T15:55:13.087504Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"mer = ds.sel(longitude=target_lon, latitude=target_lat, method='nearest')\n# print(subset.forecast_initial_time[:5].values)\nmer = mer.sel(forecast_initial_time=slice(start_time, end_time))\nmer = mer.MER.head(9).values.tolist()[0]","key":"cF1Rd47qXw"},{"type":"output","id":"6SQq31IcBlmzuvJWl6E9d","data":[],"key":"RtJEBIgxdy"}],"key":"yRdZd4GlMC"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2025-08-08T15:55:22.082545Z","start_time":"2025-08-08T15:55:22.080912Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"def calculate_sv_mean(input_sv):\n    sv = 10. ** (input_sv / 10.)\n    return 10 * np.log10(np.mean(sv))","key":"IJ8M2sjEY0"},{"type":"output","id":"XkP1M7A5Khi1tOlFYpBvV","data":[],"key":"FwH7KRIBbJ"}],"key":"jO6UvSz2sn"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2025-08-08T15:56:01.583908Z","start_time":"2025-08-08T15:56:01.151246Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"cruise['time_hour'] = cruise['time'].dt.floor('1h')\n\n# Step 2: Group by each hour\ngrouped = cruise.groupby('time_hour')\n\n# Step 3: Extract each 1-hour Dataset as a chunk\nchunks = [group.drop_vars('time_hour') for _, group in grouped]","key":"xZ28Kl6nbS"},{"type":"output","id":"MYivSDqCgyCu-laRHZKan","data":[],"key":"frqJ7rHeGY"}],"key":"KcMsIuE5Yf"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2025-08-08T15:56:36.655268Z","start_time":"2025-08-08T15:56:36.494113Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"sv_hourly = []\ntimestamps = []\nmers = []\n\nfor i in range(0,len(chunks)):\n    sv_data = chunks[i]['Sv']\n    result = calculate_sv_mean(sv_data)\n\n    ts = pd.to_datetime(chunks[i]['time'].values[0])\n    result = result.compute()\n    result = float(result.values)\n\n    sv_hourly.append([ts, result])\n    mers.append([ts, mer[i]])\n","key":"tGjDlaAyIb"},{"type":"output","id":"0tk0MydsJJI861X9gwC7G","data":[],"key":"gxDFzuFQlT"}],"key":"GYvLAbo4Dl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualization","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XH7G5X34yi"}],"identifier":"visualization","label":"Visualization","html_id":"visualization","implicit":true,"key":"zAXjSLg9hJ"}],"key":"G7G24dHfeC"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Decription","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tk8i00r503"}],"key":"PDFwei9Jbs"}],"key":"SH7oTbN8h5"},{"type":"block","kind":"notebook-code","data":{"ExecuteTime":{"end_time":"2025-08-08T15:56:49.205226Z","start_time":"2025-08-08T15:56:48.344928Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"def plot_synchronized_heatmaps(\n        heatmap_timestamps: np.ndarray,\n        anomalies: np.ndarray = None,\n        correlated_variables: list = None,\n        depths: np.ndarray = None,\n        colorscale: str = 'Reds',\n):\n\n    # --- Create Subplots ---\n    print(\"anomalies shape:\", anomalies.shape)\n    print(\"len(heatmap_timestamps):\", len(heatmap_timestamps))\n    print(\"len(depths):\", len(depths))\n    heatmap_timestamps = pd.to_datetime(heatmap_timestamps)\n    # print(len(heatmap_timestamps))\n    # print(heatmap_timestamps[:50])\n    fig = make_subplots(\n        rows=2, cols=1,\n        shared_xaxes=True,\n        # shared_yaxes=True,\n        vertical_spacing=0.03\n    )\n\n\n    # cb_len1, cb_y1 = 0.28, 0.86\n    cb_len, cb_y = 0.28, 0.14\n    # print(correlated_variables[0])\n    # Unpack sparse data\n    timestamps_0, values_0 = zip(*correlated_variables[0])\n    timestamps_1, values_1 = zip(*correlated_variables[1])\n\n    # Add Scatter plots\n    fig.add_trace(\n        go.Scatter(\n            x=timestamps_0,\n            y=values_0,\n            name=\"Sv (1h log-mean)\",\n            mode='lines+markers'\n        ),\n        row=1, col=1\n    )\n\n    fig.add_trace(\n        go.Scatter(\n            x=timestamps_1,\n            y=values_1,\n            name=\"Mean Evaporation Rate (MAR)\",\n            mode='lines+markers'\n        ),\n        row=1, col=1\n    )\n\n    # --- Add Heatmap ---\n    anomalies = anomalies[:,:,1]\n    fig.add_trace(\n        go.Heatmap(\n            z=anomalies.astype(int),\n            colorscale=colorscale,\n            zmin=anomalies.min(),\n            zmax=anomalies.max(),\n            colorbar_len=cb_len,\n            colorbar_y=cb_y,\n            # name=\"Correlations\",\n            showscale=True,\n            x=heatmap_timestamps,\n            y=depths,\n        ),\n        row=2, col=1\n    )\n    fig.update_yaxes(autorange='reversed', row=2, col=1)\n    # --- Save ---\n\n    try:\n        save_dir = os.path.dirname(os.getcwd())\n        if save_dir and not os.path.exists(save_dir):\n            os.makedirs(save_dir)\n        fig.write_html(save_dir + '/out.html')\n        print(\"Plot saved\")\n        fig.show()\n    except Exception as e:\n        print(f\"Error saving plot: {e}\")\n\nplot_synchronized_heatmaps(heatmap_timestamps=hm_timestamps, anomalies=error_map, correlated_variables=[sv_hourly, mers], depths=cruise.depth.values)","key":"Evmh0Yec79"},{"type":"output","id":"N-rPleDHQ5A2PzHg54q4f","data":[],"key":"cnTvMeDwCk"}],"key":"GVxLAIpTwk"}],"key":"KYjBGkfNkm"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Integrating sonar and buoy-based temperature data","url":"/notebooks/sonarai-foundations","group":"NOAA SONAR data examples"},"next":{"title":"Use the GeoJSON file to get the Area of Interest and query the STAC catalog for items","url":"/notebooks/pycogss-spectral-change","group":"PYCOGSS examples"}}},"domain":"http://localhost:3000"}