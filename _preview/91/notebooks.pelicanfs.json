{"version":2,"kind":"Notebook","sha256":"3447f83cea40b207df9fd01def86c52d63cf6a12bedf598001048331a371aec3","slug":"notebooks.pelicanfs","location":"/notebooks/01_pelicanfs.ipynb","dependencies":[],"frontmatter":{"title":"Using PelicanFS via FSSpec to Access Data on the OSDF","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Harsha R. Hampapura","given":"Harsha R.","family":"Hampapura"},"name":"Harsha R. Hampapura","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Brian Bockelman","given":"Brian","family":"Bockelman"},"name":"Brian Bockelman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Alexander Hoelzeman","given":"Alexander","family":"Hoelzeman"},"name":"Alexander Hoelzeman","id":"contributors-myst-generated-uid-2"},{"nameParsed":{"literal":"Carrie Wall","given":"Carrie","family":"Wall"},"name":"Carrie Wall","id":"contributors-myst-generated-uid-3"},{"nameParsed":{"literal":"Emma Turetsky","given":"Emma","family":"Turetsky"},"name":"Emma Turetsky","id":"contributors-myst-generated-uid-4"},{"nameParsed":{"literal":"Amandha Wingert Barok","given":"Amandha Wingert","family":"Barok"},"name":"Amandha Wingert Barok","id":"contributors-myst-generated-uid-5"},{"nameParsed":{"literal":"Aashish Panta","given":"Aashish","family":"Panta"},"name":"Aashish Panta","id":"contributors-myst-generated-uid-6"},{"nameParsed":{"literal":"Riley Conroy","given":"Riley","family":"Conroy"},"name":"Riley Conroy","id":"contributors-myst-generated-uid-7"},{"nameParsed":{"literal":"Douglas Schuster","given":"Douglas","family":"Schuster"},"name":"Douglas Schuster","id":"contributors-myst-generated-uid-8"},{"nameParsed":{"literal":"Justin Hiemstra","given":"Justin","family":"Hiemstra"},"name":"Justin Hiemstra","id":"contributors-myst-generated-uid-9"},{"nameParsed":{"literal":"Joanmarie Del Vecchio","given":"Joanmarie Del","family":"Vecchio"},"name":"Joanmarie Del Vecchio","id":"contributors-myst-generated-uid-10"},{"nameParsed":{"literal":"Kibiwott Koech","given":"Kibiwott","family":"Koech"},"name":"Kibiwott Koech","id":"contributors-myst-generated-uid-11"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/osdf-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"source_url":"https://github.com/projectpythia/osdf-cookbook/blob/HEAD/notebooks/01_pelicanfs.ipynb","edit_url":"https://github.com/projectpythia/osdf-cookbook/edit/HEAD/notebooks/01_pelicanfs.ipynb","exports":[{"format":"ipynb","filename":"01_pelicanfs.ipynb","url":"/osdf-cookbook/_preview/91/build/01_pelicanfs-01ecd9c1287db361708f9209db0935bc.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x5kxZjuofH"}],"key":"rcbl0O2HSD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sXnwQAXmSg"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"b5a7ZM4bGr"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now that you’ve learned about the OSDF and the Pelican command line client, you may be wondering how you can easily access that data from within a notebook using python.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"XpeNKArZ94"}],"key":"KCpfPypXHg"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"You can do this using ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"oHRrL7jrbT"},{"type":"inlineCode","value":"PelicanFS","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mipvDh0hYL"},{"type":"text","value":", which is an ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BAx1kghGWW"},{"type":"inlineCode","value":"FSSPec","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"l7yOcfeAgO"},{"type":"text","value":" implementation of the Pelican client.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Dp5VBt5k91"}],"key":"HriGIzW5ie"},{"type":"heading","depth":3,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"This notebook will contain:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"WSEahjNJqg"}],"identifier":"this-notebook-will-contain","label":"This notebook will contain:","html_id":"this-notebook-will-contain","implicit":true,"key":"CIbN07JoDj"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A brief explanation of FSSPec and PelicanFS","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"fUOxQfVUxe"}],"key":"AQZZ83OcPz"}],"key":"nq9orjODf7"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A real-world example using FSSPec, Pelican, Xarray, and Zarr","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"wvVUr3clcl"}],"key":"AqJT8rA4qw"}],"key":"kAIx0KidbF"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Other common access patterns","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"fUC7SiyIcA"}],"key":"VSHTe3Qpl6"}],"key":"GmiOWaZ22c"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"FAQs","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"aBoH6Bco3Z"}],"key":"qrWTUTAbk8"}],"key":"tKSNiNtLrD"}],"key":"ZRuxBODsVz"}],"key":"Ltmp0Fhm5l"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xdwoihU4yZ"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"YXiRIE2Q76"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To better understand this notebook, please familiarize yourself with the following concepts:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"a9qQPWlPh8"}],"key":"KbRNHRs6nS"},{"type":"table","position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gRKw4AQo2J"}],"key":"hvLpJPP4Qo"},{"type":"tableCell","header":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gyfxfFUJWG"}],"key":"MfYfgeoX4N"},{"type":"tableCell","header":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fNlRMcWh5f"}],"key":"K2G0C40sjy"}],"key":"TpZSNDRnf9"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"http://projectpythia.org/osdf-cookbook/notebooks/osdf-intro/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Intro to OSDF","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"cWTrk1Vuyg"}],"urlSource":"http://projectpythia.org/osdf-cookbook/notebooks/osdf-intro/","key":"lIqCMvHYDZ"}],"key":"FjdHSP9CCp"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Necessary","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"hRQpUVk97q"}],"key":"vFqwNq6r1m"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[],"key":"ncKR8A0YTf"}],"key":"tHZC2OPj7R"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/xarray/","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Understanding of Xarray","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"nnJkrnZ0yC"}],"urlSource":"https://foundations.projectpythia.org/core/xarray/","key":"XY1TNqMMuz"}],"key":"c7uQDT9n72"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"vRFDBIYn7P"}],"key":"o12cYpdUd0"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"To better understand the example workflow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"EwcHBDfZiN"}],"key":"vsikQUX9cB"}],"key":"VJXbGnQpD1"},{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"link","url":"https://filesystem-spec.readthedocs.io/en/latest/","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Overview of FSSpec","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"hcyXchABbn"}],"urlSource":"https://filesystem-spec.readthedocs.io/en/latest/","key":"wE3wZZU7le"}],"key":"oeYEHUykFI"},{"type":"tableCell","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"bJ0gjk3qUn"}],"key":"GwgCIhbL1j"},{"type":"tableCell","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"To better understand the FSSpec library","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"wb4lnKJ2Cq"}],"key":"uK5Rh5Q1ws"}],"key":"HFmxQzH1Q6"}],"key":"nfv1Pie24u"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"LSxnuGWL09"}],"key":"pAPQXdCUeb"},{"type":"text","value":": 20-30 minutes","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"FLhxdMukuN"}],"key":"hxFtvzrxL4"}],"key":"mzD2qfW0ph"}],"key":"MvNQY1oOLf"}],"key":"cwT9gq12t5"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CKKaPNa5NJ"}],"key":"FqibJk04rP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vKafGUWR8Y"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"Axv2YsaL48"}],"key":"RLDMkvQHw5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\nimport metpy.calc as mpcalc\nfrom metpy.units import units\nimport fsspec\nimport intake","key":"c7NeCWqbTv"},{"type":"output","id":"52lhPm5C27SEFgBq0kJU7","data":[],"key":"El0EInyBqI"}],"key":"EwpEYEGw66"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What are PelicanFS and FSSPec?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"szfi2ycAEi"}],"identifier":"what-are-pelicanfs-and-fsspec","label":"What are PelicanFS and FSSPec?","html_id":"what-are-pelicanfs-and-fsspec","implicit":true,"key":"ABHfKH4MZL"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, let’s understand PelicanFS and how it integrates with FSSpec","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OqA4KnDR5d"}],"key":"hfzJT3XPXx"}],"key":"T5s6MU3yuZ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"FSSPec","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"d8rO0rtPXB"}],"identifier":"fsspec","label":"FSSPec","html_id":"fsspec","implicit":true,"key":"TYyuecJ3Li"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"FileSystem Spec (fsspec) is a python library which endeavors to provide a unified interface to many different storage backends. This includes, but is not limited to, POSIX, https, and S3. It’s used by various data processing libraries such as ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"i4CWTK0CS1"},{"type":"inlineCode","value":"xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yNdGExdGV6"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zS5yNbXwBp"},{"type":"inlineCode","value":"pandas","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WkY0wzowS6"},{"type":"text","value":", and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jc61N7VJmb"},{"type":"inlineCode","value":"intake","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OJeErfL8ay"},{"type":"text","value":", just to name a few.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"d0RqaUNQsC"}],"key":"eiLvfdlb2V"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"To learn more about FSSPec, visit its ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"PP986xg5cM"},{"type":"link","url":"https://filesystem-spec.readthedocs.io/en/latest/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"information page","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Js9vJAxUt0"}],"urlSource":"https://filesystem-spec.readthedocs.io/en/latest/","key":"uYY5CkxWbz"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"j6jxd4xyV4"}],"key":"IZB5e7X1pT"},{"type":"heading","depth":4,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Schemes","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"lYX656oszI"}],"identifier":"schemes","label":"Schemes","html_id":"schemes","implicit":true,"key":"YUt6qcXi3W"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"FSSpec figures out how to interact with data from different storage backends through the scheme in the data path. For example, FSSpec knows to use the “Hyper Text Transfer Protocol” interface whenever it sees URLs with the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"A9emxJiQai"},{"type":"inlineCode","value":"https:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Uqedm2r1MS"},{"type":"text","value":" scheme. This lets users interact with data from a variety of storage technologies without forcing them to know how those technologies work under the hood.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"oBYrcQ7jur"}],"key":"xqLOjkbwHC"},{"type":"heading","depth":3,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"PelicanFS","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"TPc7XmrOK7"}],"identifier":"pelicanfs","label":"PelicanFS","html_id":"pelicanfs","implicit":true,"key":"tfHqx2rhT7"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"PelicanFS is an implementation of FSSpec that introduces two new schemes to FSSpec: ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"bRU6IWZqrB"},{"type":"inlineCode","value":"pelican","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"kg4ttOuTrs"},{"type":"text","value":" and ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"v2I7Q0riWh"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"CwOPbpbcru"},{"type":"text","value":". PelicanFS enables you to use the ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"K7KcvgOoDf"},{"type":"inlineCode","value":"pelican://","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"vg6MNVShw3"},{"type":"text","value":" scheme to access data via Pelican Federations like the OSDF in any software that already understands FSSpec. To use it, you must specify the federation host name. A Pelican path looks like:","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"vZacnuySpF"}],"key":"IN8gDWC8Wa"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"inlineCode","value":"pelican://<federation-host-name>/<namespace-path>","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"SluKdwQR44"}],"key":"WBf5neSDdO"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"jmURi8LXR2"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"YknDsIm0sJ"},{"type":"text","value":" scheme is a specific instance of the ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"O7f7legvyz"},{"type":"inlineCode","value":"pelican","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"mZWFm3Us9k"},{"type":"text","value":" scheme that knows how to access the OSDF. A path using the ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"dl6MTSAZFw"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ThkXN5WMyZ"},{"type":"text","value":" scheme ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"jSW4uxuw4u"},{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"should not","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"HQr0Wtq2O7"}],"key":"WBCADhb7JE"},{"type":"text","value":" provide the federation root. An OSDF path looks like:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"whx3iUhoaZ"}],"key":"BDMEGEdNHu"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"inlineCode","value":"osdf:///<namespace-path>","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Ptb3c8h8jp"}],"key":"f9teBHU3Kt"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"PelicanFS teaches FSSpec how to interact with the Pelican protocol using the above pelican:-schemed or osdf:-schemed URLs.","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"MWmNYGAEy3"}],"key":"sGuh2x0wst"}],"key":"yAAmS2NwfY"},{"type":"block","kind":"notebook-content","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"BMHRZrZUQq"}],"key":"FHnf4txtTF"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Notice the three ‘/’ after “osdf:”. This is required for a properly-formed osdf path.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"UO2PShTB7n"}],"key":"HYEp4eaRsA"}],"key":"fYb3feLMgI"}],"key":"eJLROextTV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you’d like to understand more about how pelican works, check out the documentation ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"She17pAxIi"},{"type":"link","url":"https://docs.pelicanplatform.org/about-pelican/core-concepts","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bsYqYKR4wq"}],"urlSource":"https://docs.pelicanplatform.org/about-pelican/core-concepts","key":"FlbPg2sIpw"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"F1R5BMaLNS"}],"key":"fLe63SisKy"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Putting it all together","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gAOfPn8BrF"}],"identifier":"putting-it-all-together","label":"Putting it all together","html_id":"putting-it-all-together","implicit":true,"key":"wIzo69LyJI"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"What does this mean in practice?","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EwiJ2TuSj2"}],"key":"kzDK7izp6O"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"If you want to access data from the OSDF using FSSpec or any library that uses FSSpec, build the osdf-schemed URL for the data and use that URL as your data path and then FSSpec and PelicanFS will do all the work to resolve it behind the scenes.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"QwaYkwBT2V"}],"key":"xqwcOvKyaV"}],"key":"FoPgyXypkg"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DPHS8eDC8d"}],"key":"wY1mlVHso8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A PelicanFS Example using Real Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"puf10eDFBi"}],"identifier":"a-pelicanfs-example-using-real-data","label":"A PelicanFS Example using Real Data","html_id":"a-pelicanfs-example-using-real-data","implicit":true,"key":"L7frJn9UEX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The following is an example that shows how PelicanFS works on real world data using FSSPec and Xarray to access Zarr data from AWS.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EuNzzVDuip"}],"key":"VfYOpBEgos"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This portion of the notebook is based off of the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"vKakBulZUc"},{"type":"link","url":"https://projectpythia.org/HRRR-AWS-cookbook/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Project Pythia HRRR AWS Cookbook","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"aLO2OE4NJJ"}],"urlSource":"https://projectpythia.org/HRRR-AWS-cookbook/","key":"QerfPqgI8t"}],"key":"yMoZN3jKvj"}],"key":"RZdGXcQ8O5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setting the Proper Path","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"w3TmuTF01b"}],"identifier":"setting-the-proper-path","label":"Setting the Proper Path","html_id":"setting-the-proper-path","implicit":true,"key":"PMOLon6Lus"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The data for this tutorial is part of AWS Open Data, hosted in the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"UFuJH2qyBa"},{"type":"inlineCode","value":"us-west-1","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Z4hPBqls6o"},{"type":"text","value":" region. The OSDF provides access to that region using the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ibXGgUsq4l"},{"type":"inlineCode","value":"/aws-opendata/us-west-1","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fmlevNkaZf"},{"type":"text","value":" namespace.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"NGT2B5sLBr"}],"key":"QlKYdHUpZ4"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Let’s first create a path which uses the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BWSjXP9RCj"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"w97nVO932l"},{"type":"text","value":" scheme.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"B8DhrPMSQm"}],"key":"osLM6hv3g1"}],"key":"ERxZfD2yu5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Set the date, hour, variable, and level for the HRRR data\ndate = '20211016'\nhour = '21'\nvar = 'TMP'\nlevel = '2m_above_ground'\n\n# Construct object paths for the Zarr datasets using the osdf scheme\nnamespace_object1 = f'osdf:///aws-opendata/us-west-1/hrrrzarr/sfc/{date}/{date}_{hour}z_anl.zarr/{level}/{var}/{level}/'\nnamespace_object2 = f'osdf:///aws-opendata/us-west-1/hrrrzarr/sfc/{date}/{date}_{hour}z_anl.zarr/{level}/{var}/'","key":"ruoSkATrGI"},{"type":"output","id":"Tzs7DRKKL_9ngg7rTTlbC","data":[],"key":"euXKLqwkYY"}],"key":"g3JWLnALay"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Using FSSpec to access the data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"H28YxJDXPF"}],"identifier":"using-fsspec-to-access-the-data","label":"Using FSSpec to access the data","html_id":"using-fsspec-to-access-the-data","implicit":true,"key":"hpr1QdW5LI"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we can access the data using XArray as usual. The two objects will be accessed using fsspec’s ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hYBz96hfeL"},{"type":"inlineCode","value":"get_mapper","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qDuMpaHwxe"},{"type":"text","value":" function, which knows to use PelicanFS because we created the path using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"q7e24BlREe"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vWryiczYOq"},{"type":"text","value":" scheme.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"s6z7eSGuQy"}],"key":"SCPgF18Ybz"}],"key":"CmdzAaqbgw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Get mappers for the Zarr datasets\n\nobject1 = fsspec.get_mapper(namespace_object1)\nobject2 = fsspec.get_mapper(namespace_object2)\n\n# Open the datasets\nds = xr.open_mfdataset([object1, object2], engine='zarr', decode_timedelta=True)\n\n# Display the dataset\nds","key":"aC4dsPh3NN"},{"type":"output","id":"XKcmlKetkGedeOkDsFIZ1","data":[{"output_type":"stream","name":"stderr","text":"No working cache found\n"},{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mNoAvailableSource\u001b[39m                         Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[3]\u001b[39m\u001b[32m, line 7\u001b[39m\n\u001b[32m      4\u001b[39m object2 = fsspec.get_mapper(namespace_object2)\n\u001b[32m      6\u001b[39m \u001b[38;5;66;03m# Open the datasets\u001b[39;00m\n\u001b[32m----> \u001b[39m\u001b[32m7\u001b[39m ds = \u001b[43mxr\u001b[49m\u001b[43m.\u001b[49m\u001b[43mopen_mfdataset\u001b[49m\u001b[43m(\u001b[49m\u001b[43m[\u001b[49m\u001b[43mobject1\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mobject2\u001b[49m\u001b[43m]\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mengine\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m'\u001b[39;49m\u001b[33;43mzarr\u001b[39;49m\u001b[33;43m'\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_timedelta\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mTrue\u001b[39;49;00m\u001b[43m)\u001b[49m\n\u001b[32m      9\u001b[39m \u001b[38;5;66;03m# Display the dataset\u001b[39;00m\n\u001b[32m     10\u001b[39m ds\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/xarray/backends/api.py:1788\u001b[39m, in \u001b[36mopen_mfdataset\u001b[39m\u001b[34m(paths, chunks, concat_dim, compat, preprocess, engine, data_vars, coords, combine, parallel, join, attrs_file, combine_attrs, errors, **kwargs)\u001b[39m\n\u001b[32m   1786\u001b[39m \u001b[38;5;28;01mfor\u001b[39;00m p \u001b[38;5;129;01min\u001b[39;00m paths1d:\n\u001b[32m   1787\u001b[39m     \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m-> \u001b[39m\u001b[32m1788\u001b[39m         ds = \u001b[43mopen_\u001b[49m\u001b[43m(\u001b[49m\u001b[43mp\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mopen_kwargs\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1789\u001b[39m         datasets.append(ds)\n\u001b[32m   1790\u001b[39m     \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;167;01mException\u001b[39;00m \u001b[38;5;28;01mas\u001b[39;00m e:\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/xarray/backends/api.py:760\u001b[39m, in \u001b[36mopen_dataset\u001b[39m\u001b[34m(filename_or_obj, engine, chunks, cache, decode_cf, mask_and_scale, decode_times, decode_timedelta, use_cftime, concat_characters, decode_coords, drop_variables, create_default_indexes, inline_array, chunked_array_type, from_array_kwargs, backend_kwargs, **kwargs)\u001b[39m\n\u001b[32m    748\u001b[39m decoders = _resolve_decoders_kwargs(\n\u001b[32m    749\u001b[39m     decode_cf,\n\u001b[32m    750\u001b[39m     open_backend_dataset_parameters=backend.open_dataset_parameters,\n\u001b[32m   (...)\u001b[39m\u001b[32m    756\u001b[39m     decode_coords=decode_coords,\n\u001b[32m    757\u001b[39m )\n\u001b[32m    759\u001b[39m overwrite_encoded_chunks = kwargs.pop(\u001b[33m\"\u001b[39m\u001b[33moverwrite_encoded_chunks\u001b[39m\u001b[33m\"\u001b[39m, \u001b[38;5;28;01mNone\u001b[39;00m)\n\u001b[32m--> \u001b[39m\u001b[32m760\u001b[39m backend_ds = \u001b[43mbackend\u001b[49m\u001b[43m.\u001b[49m\u001b[43mopen_dataset\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    761\u001b[39m \u001b[43m    \u001b[49m\u001b[43mfilename_or_obj\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    762\u001b[39m \u001b[43m    \u001b[49m\u001b[43mdrop_variables\u001b[49m\u001b[43m=\u001b[49m\u001b[43mdrop_variables\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    763\u001b[39m \u001b[43m    \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mdecoders\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    764\u001b[39m \u001b[43m    \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    765\u001b[39m \u001b[43m\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    766\u001b[39m ds = _dataset_from_backend_dataset(\n\u001b[32m    767\u001b[39m     backend_ds,\n\u001b[32m    768\u001b[39m     filename_or_obj,\n\u001b[32m   (...)\u001b[39m\u001b[32m    779\u001b[39m     **kwargs,\n\u001b[32m    780\u001b[39m )\n\u001b[32m    781\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m ds\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/xarray/backends/zarr.py:1654\u001b[39m, in \u001b[36mZarrBackendEntrypoint.open_dataset\u001b[39m\u001b[34m(self, filename_or_obj, mask_and_scale, decode_times, concat_characters, decode_coords, drop_variables, use_cftime, decode_timedelta, group, mode, synchronizer, consolidated, chunk_store, storage_options, zarr_version, zarr_format, store, engine, use_zarr_fill_value_as_mask, cache_members)\u001b[39m\n\u001b[32m   1652\u001b[39m filename_or_obj = _normalize_path(filename_or_obj)\n\u001b[32m   1653\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m store:\n\u001b[32m-> \u001b[39m\u001b[32m1654\u001b[39m     store = \u001b[43mZarrStore\u001b[49m\u001b[43m.\u001b[49m\u001b[43mopen_group\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m   1655\u001b[39m \u001b[43m        \u001b[49m\u001b[43mfilename_or_obj\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1656\u001b[39m \u001b[43m        \u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m=\u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1657\u001b[39m \u001b[43m        \u001b[49m\u001b[43mmode\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmode\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1658\u001b[39m \u001b[43m        \u001b[49m\u001b[43msynchronizer\u001b[49m\u001b[43m=\u001b[49m\u001b[43msynchronizer\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1659\u001b[39m \u001b[43m        \u001b[49m\u001b[43mconsolidated\u001b[49m\u001b[43m=\u001b[49m\u001b[43mconsolidated\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1660\u001b[39m \u001b[43m        \u001b[49m\u001b[43mconsolidate_on_close\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mFalse\u001b[39;49;00m\u001b[43m,\u001b[49m\n\u001b[32m   1661\u001b[39m \u001b[43m        \u001b[49m\u001b[43mchunk_store\u001b[49m\u001b[43m=\u001b[49m\u001b[43mchunk_store\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1662\u001b[39m \u001b[43m        \u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m=\u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1663\u001b[39m \u001b[43m        \u001b[49m\u001b[43mzarr_version\u001b[49m\u001b[43m=\u001b[49m\u001b[43mzarr_version\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1664\u001b[39m \u001b[43m        \u001b[49m\u001b[43muse_zarr_fill_value_as_mask\u001b[49m\u001b[43m=\u001b[49m\u001b[38;5;28;43;01mNone\u001b[39;49;00m\u001b[43m,\u001b[49m\n\u001b[32m   1665\u001b[39m \u001b[43m        \u001b[49m\u001b[43mzarr_format\u001b[49m\u001b[43m=\u001b[49m\u001b[43mzarr_format\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1666\u001b[39m \u001b[43m        \u001b[49m\u001b[43mcache_members\u001b[49m\u001b[43m=\u001b[49m\u001b[43mcache_members\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m   1667\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1669\u001b[39m store_entrypoint = StoreBackendEntrypoint()\n\u001b[32m   1670\u001b[39m \u001b[38;5;28;01mwith\u001b[39;00m close_on_error(store):\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/xarray/backends/zarr.py:714\u001b[39m, in \u001b[36mZarrStore.open_group\u001b[39m\u001b[34m(cls, store, mode, synchronizer, group, consolidated, consolidate_on_close, chunk_store, storage_options, append_dim, write_region, safe_chunks, align_chunks, zarr_version, zarr_format, use_zarr_fill_value_as_mask, write_empty, cache_members)\u001b[39m\n\u001b[32m    688\u001b[39m \u001b[38;5;129m@classmethod\u001b[39m\n\u001b[32m    689\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mopen_group\u001b[39m(\n\u001b[32m    690\u001b[39m     \u001b[38;5;28mcls\u001b[39m,\n\u001b[32m   (...)\u001b[39m\u001b[32m    707\u001b[39m     cache_members: \u001b[38;5;28mbool\u001b[39m = \u001b[38;5;28;01mTrue\u001b[39;00m,\n\u001b[32m    708\u001b[39m ):\n\u001b[32m    709\u001b[39m     (\n\u001b[32m    710\u001b[39m         zarr_group,\n\u001b[32m    711\u001b[39m         consolidate_on_close,\n\u001b[32m    712\u001b[39m         close_store_on_close,\n\u001b[32m    713\u001b[39m         use_zarr_fill_value_as_mask,\n\u001b[32m--> \u001b[39m\u001b[32m714\u001b[39m     ) = \u001b[43m_get_open_params\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    715\u001b[39m \u001b[43m        \u001b[49m\u001b[43mstore\u001b[49m\u001b[43m=\u001b[49m\u001b[43mstore\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    716\u001b[39m \u001b[43m        \u001b[49m\u001b[43mmode\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmode\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    717\u001b[39m \u001b[43m        \u001b[49m\u001b[43msynchronizer\u001b[49m\u001b[43m=\u001b[49m\u001b[43msynchronizer\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    718\u001b[39m \u001b[43m        \u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m=\u001b[49m\u001b[43mgroup\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    719\u001b[39m \u001b[43m        \u001b[49m\u001b[43mconsolidated\u001b[49m\u001b[43m=\u001b[49m\u001b[43mconsolidated\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    720\u001b[39m \u001b[43m        \u001b[49m\u001b[43mconsolidate_on_close\u001b[49m\u001b[43m=\u001b[49m\u001b[43mconsolidate_on_close\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    721\u001b[39m \u001b[43m        \u001b[49m\u001b[43mchunk_store\u001b[49m\u001b[43m=\u001b[49m\u001b[43mchunk_store\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    722\u001b[39m \u001b[43m        \u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m=\u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    723\u001b[39m \u001b[43m        \u001b[49m\u001b[43mzarr_version\u001b[49m\u001b[43m=\u001b[49m\u001b[43mzarr_version\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    724\u001b[39m \u001b[43m        \u001b[49m\u001b[43muse_zarr_fill_value_as_mask\u001b[49m\u001b[43m=\u001b[49m\u001b[43muse_zarr_fill_value_as_mask\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    725\u001b[39m \u001b[43m        \u001b[49m\u001b[43mzarr_format\u001b[49m\u001b[43m=\u001b[49m\u001b[43mzarr_format\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    726\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    728\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mcls\u001b[39m(\n\u001b[32m    729\u001b[39m         zarr_group,\n\u001b[32m    730\u001b[39m         mode,\n\u001b[32m   (...)\u001b[39m\u001b[32m    739\u001b[39m         cache_members=cache_members,\n\u001b[32m    740\u001b[39m     )\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/xarray/backends/zarr.py:1862\u001b[39m, in \u001b[36m_get_open_params\u001b[39m\u001b[34m(store, mode, synchronizer, group, consolidated, consolidate_on_close, chunk_store, storage_options, zarr_version, use_zarr_fill_value_as_mask, zarr_format)\u001b[39m\n\u001b[32m   1859\u001b[39m \u001b[38;5;28;01melif\u001b[39;00m consolidated \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m   1860\u001b[39m     \u001b[38;5;66;03m# same but with more error handling in case no consolidated metadata found\u001b[39;00m\n\u001b[32m   1861\u001b[39m     \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m-> \u001b[39m\u001b[32m1862\u001b[39m         zarr_root_group = \u001b[43mzarr\u001b[49m\u001b[43m.\u001b[49m\u001b[43mopen_consolidated\u001b[49m\u001b[43m(\u001b[49m\u001b[43mstore\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mopen_kwargs\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1863\u001b[39m     \u001b[38;5;28;01mexcept\u001b[39;00m (\u001b[38;5;167;01mValueError\u001b[39;00m, \u001b[38;5;167;01mKeyError\u001b[39;00m):\n\u001b[32m   1864\u001b[39m         \u001b[38;5;66;03m# ValueError in zarr-python 3.x, KeyError in 2.x.\u001b[39;00m\n\u001b[32m   1865\u001b[39m         \u001b[38;5;28;01mtry\u001b[39;00m:\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/zarr/convenience.py:1360\u001b[39m, in \u001b[36mopen_consolidated\u001b[39m\u001b[34m(store, metadata_key, mode, **kwargs)\u001b[39m\n\u001b[32m   1357\u001b[39m         metadata_key = \u001b[33m\"\u001b[39m\u001b[33mmeta/root/consolidated/\u001b[39m\u001b[33m\"\u001b[39m + metadata_key\n\u001b[32m   1359\u001b[39m \u001b[38;5;66;03m# setup metadata store\u001b[39;00m\n\u001b[32m-> \u001b[39m\u001b[32m1360\u001b[39m meta_store = \u001b[43mConsolidatedStoreClass\u001b[49m\u001b[43m(\u001b[49m\u001b[43mstore\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmetadata_key\u001b[49m\u001b[43m=\u001b[49m\u001b[43mmetadata_key\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m   1362\u001b[39m \u001b[38;5;66;03m# pass through\u001b[39;00m\n\u001b[32m   1363\u001b[39m chunk_store = kwargs.pop(\u001b[33m\"\u001b[39m\u001b[33mchunk_store\u001b[39m\u001b[33m\"\u001b[39m, \u001b[38;5;28;01mNone\u001b[39;00m) \u001b[38;5;129;01mor\u001b[39;00m store\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/zarr/storage.py:3046\u001b[39m, in \u001b[36mConsolidatedMetadataStore.__init__\u001b[39m\u001b[34m(self, store, metadata_key)\u001b[39m\n\u001b[32m   3043\u001b[39m \u001b[38;5;28mself\u001b[39m.store = Store._ensure_store(store)\n\u001b[32m   3045\u001b[39m \u001b[38;5;66;03m# retrieve consolidated metadata\u001b[39;00m\n\u001b[32m-> \u001b[39m\u001b[32m3046\u001b[39m meta = json_loads(\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mstore\u001b[49m\u001b[43m[\u001b[49m\u001b[43mmetadata_key\u001b[49m\u001b[43m]\u001b[49m)\n\u001b[32m   3048\u001b[39m \u001b[38;5;66;03m# check format of consolidated metadata\u001b[39;00m\n\u001b[32m   3049\u001b[39m consolidated_format = meta.get(\u001b[33m\"\u001b[39m\u001b[33mzarr_consolidated_format\u001b[39m\u001b[33m\"\u001b[39m, \u001b[38;5;28;01mNone\u001b[39;00m)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/zarr/storage.py:1446\u001b[39m, in \u001b[36mFSStore.__getitem__\u001b[39m\u001b[34m(self, key)\u001b[39m\n\u001b[32m   1444\u001b[39m key = \u001b[38;5;28mself\u001b[39m._normalize_key(key)\n\u001b[32m   1445\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m-> \u001b[39m\u001b[32m1446\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mmap\u001b[49m\u001b[43m[\u001b[49m\u001b[43mkey\u001b[49m\u001b[43m]\u001b[49m\n\u001b[32m   1447\u001b[39m \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;28mself\u001b[39m.exceptions \u001b[38;5;28;01mas\u001b[39;00m e:\n\u001b[32m   1448\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m \u001b[38;5;167;01mKeyError\u001b[39;00m(key) \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01me\u001b[39;00m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/fsspec/mapping.py:155\u001b[39m, in \u001b[36mFSMap.__getitem__\u001b[39m\u001b[34m(self, key, default)\u001b[39m\n\u001b[32m    153\u001b[39m k = \u001b[38;5;28mself\u001b[39m._key_to_str(key)\n\u001b[32m    154\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m--> \u001b[39m\u001b[32m155\u001b[39m     result = \u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mfs\u001b[49m\u001b[43m.\u001b[49m\u001b[43mcat\u001b[49m\u001b[43m(\u001b[49m\u001b[43mk\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    156\u001b[39m \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;28mself\u001b[39m.missing_exceptions \u001b[38;5;28;01mas\u001b[39;00m exc:\n\u001b[32m    157\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m default \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/fsspec/asyn.py:118\u001b[39m, in \u001b[36msync_wrapper.<locals>.wrapper\u001b[39m\u001b[34m(*args, **kwargs)\u001b[39m\n\u001b[32m    115\u001b[39m \u001b[38;5;129m@functools\u001b[39m.wraps(func)\n\u001b[32m    116\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mwrapper\u001b[39m(*args, **kwargs):\n\u001b[32m    117\u001b[39m     \u001b[38;5;28mself\u001b[39m = obj \u001b[38;5;129;01mor\u001b[39;00m args[\u001b[32m0\u001b[39m]\n\u001b[32m--> \u001b[39m\u001b[32m118\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[43msync\u001b[49m\u001b[43m(\u001b[49m\u001b[38;5;28;43mself\u001b[39;49m\u001b[43m.\u001b[49m\u001b[43mloop\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mfunc\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43margs\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/fsspec/asyn.py:103\u001b[39m, in \u001b[36msync\u001b[39m\u001b[34m(loop, func, timeout, *args, **kwargs)\u001b[39m\n\u001b[32m    101\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m FSTimeoutError \u001b[38;5;28;01mfrom\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34;01mreturn_result\u001b[39;00m\n\u001b[32m    102\u001b[39m \u001b[38;5;28;01melif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(return_result, \u001b[38;5;167;01mBaseException\u001b[39;00m):\n\u001b[32m--> \u001b[39m\u001b[32m103\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m return_result\n\u001b[32m    104\u001b[39m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[32m    105\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m return_result\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/fsspec/asyn.py:56\u001b[39m, in \u001b[36m_runner\u001b[39m\u001b[34m(event, coro, result, timeout)\u001b[39m\n\u001b[32m     54\u001b[39m     coro = asyncio.wait_for(coro, timeout=timeout)\n\u001b[32m     55\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m---> \u001b[39m\u001b[32m56\u001b[39m     result[\u001b[32m0\u001b[39m] = \u001b[38;5;28;01mawait\u001b[39;00m coro\n\u001b[32m     57\u001b[39m \u001b[38;5;28;01mexcept\u001b[39;00m \u001b[38;5;167;01mException\u001b[39;00m \u001b[38;5;28;01mas\u001b[39;00m ex:\n\u001b[32m     58\u001b[39m     result[\u001b[32m0\u001b[39m] = ex\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/pelicanfs/core.py:980\u001b[39m, in \u001b[36mPelicanFileSystem._cache_multi_dec.<locals>.wrapper\u001b[39m\u001b[34m(self, *args, **kwargs)\u001b[39m\n\u001b[32m    978\u001b[39m     data_url, director_response = \u001b[38;5;28;01mawait\u001b[39;00m \u001b[38;5;28mself\u001b[39m.get_origin_url(path)\n\u001b[32m    979\u001b[39m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[32m--> \u001b[39m\u001b[32m980\u001b[39m     data_url, director_response = \u001b[38;5;28;01mawait\u001b[39;00m \u001b[38;5;28mself\u001b[39m.get_working_cache(path)\n\u001b[32m    982\u001b[39m \u001b[38;5;66;03m# Handle token generation if required (single path)\u001b[39;00m\n\u001b[32m    983\u001b[39m operation = \u001b[38;5;28mself\u001b[39m._get_token_operation(func.\u001b[34m__name__\u001b[39m)\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/osdf-cookbook/lib/python3.12/site-packages/pelicanfs/core.py:546\u001b[39m, in \u001b[36mPelicanFileSystem.get_working_cache\u001b[39m\u001b[34m(self, fileloc)\u001b[39m\n\u001b[32m    544\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m cache_list:\n\u001b[32m    545\u001b[39m     logger.error(\u001b[33m\"\u001b[39m\u001b[33mNo working cache found\u001b[39m\u001b[33m\"\u001b[39m)\n\u001b[32m--> \u001b[39m\u001b[32m546\u001b[39m     \u001b[38;5;28;01mraise\u001b[39;00m NoAvailableSource()\n\u001b[32m    548\u001b[39m \u001b[38;5;28;01mwith\u001b[39;00m \u001b[38;5;28mself\u001b[39m._namespace_lock:\n\u001b[32m    549\u001b[39m     \u001b[38;5;28mself\u001b[39m._namespace_cache[namespace] = _CacheManager(cache_list, director_response)\n\n\u001b[31mNoAvailableSource\u001b[39m: ","ename":"NoAvailableSource","evalue":""}],"key":"ktpfMNeSSR"}],"key":"LfaNRstwf0"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Continue the workflow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ODWAdlZVcs"}],"identifier":"continue-the-workflow","label":"Continue the workflow","html_id":"continue-the-workflow","implicit":true,"key":"iVxAY1NcG1"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"As you can see, Xarray streamed the data correctly into the datasets. To prove the workflow works, the next cell continues the computation and generates two plots. This tutorial will not go in depth as to what this code is accomplishing.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"uaVhe1e7Kh"}],"key":"TLazqoB3gM"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"If you’d like to know more about the following workflow, please refer to the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"q2jngX8DYx"},{"type":"link","url":"https://projectpythia.org/HRRR-AWS-cookbook/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Project Pythia HRRR AWS Cookbook","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jYpg8e2m7c"}],"urlSource":"https://projectpythia.org/HRRR-AWS-cookbook/","key":"C2fVy47E82"}],"key":"y9NNbCpgWm"}],"key":"C5YIg4LZEK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Define coordinates for projection\nlon1 = -97.5\nlat1 = 38.5\nslat = 38.5\n\n# Define the Lambert Conformal projection\nprojData = ccrs.LambertConformal(\n    central_longitude=lon1,\n    central_latitude=lat1,\n    standard_parallels=[slat, slat],\n    globe=ccrs.Globe(\n        semimajor_axis=6371229,\n        semiminor_axis=6371229\n    )\n)\n\n# Display dataset coordinates\nds.coords\n\n# Extract temperature data\nairTemp = ds.TMP\n\n# Display the temperature data\nairTemp\n\n# Convert temperature units to Celsius\nairTemp = airTemp.metpy.convert_units('degC')\n\n# Display the converted temperature data\nairTemp\n\n# Extract projection coordinates\nx = airTemp.projection_x_coordinate\ny = airTemp.projection_y_coordinate\n\n# Plot temperature data\nairTemp.plot(figsize=(11, 8.5))\n\n# Compute minimum and maximum temperatures\nminTemp = airTemp.min().compute()\nmaxTemp = airTemp.max().compute()\n\n# Display minimum and maximum temperature values\nminTemp.values, maxTemp.values\n\n# Define contour levels\nfint = np.arange(np.floor(minTemp.values), np.ceil(maxTemp.values) + 2, 2)\n\n# Define plot bounds and resolution\nlatN = 50.4\nlatS = 24.25\nlonW = -123.8\nlonE = -71.2\nres = '50m'\n\n# Create a figure and axis with projection\nfig = plt.figure(figsize=(18, 12))\nax = plt.subplot(1, 1, 1, projection=projData)\nax.set_extent([lonW, lonE, latS, latN], crs=ccrs.PlateCarree())\nax.add_feature(cfeature.COASTLINE.with_scale(res))\nax.add_feature(cfeature.STATES.with_scale(res))\n\n# Add the title\ntl1 = 'HRRR 2m temperature ($^\\\\circ$C)'\ntl2 = f'Analysis valid at: {hour}00 UTC {date}'\nplt.title(f'{tl1}\\n{tl2}', fontsize=16)\n\n# Contour fill\nCF = ax.contourf(x, y, airTemp, levels=fint, cmap=plt.get_cmap('coolwarm'))\n\n# Make a colorbar for the ContourSet returned by the contourf call\ncbar = fig.colorbar(CF, shrink=0.5)\ncbar.set_label(r'2m Temperature ($^\\circ$C)', size='large')\n\n# Show the plot\nplt.show()","key":"rxrQ4vHEjM"},{"type":"output","id":"ZgGBJlec7o6x92tQLlH_A","data":[],"key":"ZfdEAIYfC0"}],"key":"U6V8hrjJuA"},{"type":"block","kind":"notebook-content","children":[{"type":"thematicBreak","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YDmXbm8Aey"}],"key":"WLM3Zu5AKw"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Other Ways to Access","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A32y38na7Q"}],"identifier":"other-ways-to-access","label":"Other Ways to Access","html_id":"other-ways-to-access","implicit":true,"key":"Q5vXJisuMs"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"There are other common ways to access data and use data with FSSpec and PelicanFS. This section will will cover the following topics","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uCCP7TP4md"}],"key":"MXDHHM1c71"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Using an Intake Catalog","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Egn8ioGchK"}],"key":"dfUwspMRsc"}],"key":"i82PJZOat4"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Directly Accessing Data","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"aD6xRIjyH5"}],"key":"wQczlIBbsH"}],"key":"dgtpf6BhIX"}],"key":"C2Gdu6soYR"}],"key":"CJvnXs10Mc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Intake Catalog","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AxjIBGDNVe"}],"identifier":"intake-catalog","label":"Intake Catalog","html_id":"intake-catalog","implicit":true,"key":"IolUbpY9Wt"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In order to use PelicanFS with an Intake catalog, the paths in the catalog itself need to use the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bYPr3EKQx5"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"S0gsSHgJ56"},{"type":"text","value":" or ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kPfrudDqeg"},{"type":"inlineCode","value":"pelican","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tpM35yhpfm"},{"type":"text","value":" schemes.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QGTg5Bg60o"}],"key":"fA1VB7Nmu8"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Here’s an example using the catalog located at ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"id9ZK9lzjG"},{"type":"link","url":"https://data.rda.ucar.edu/d850001/catalogs/osdf/cmip6-aws/cmip6-osdf-zarr.json","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"https://​data​.rda​.ucar​.edu​/d850001​/catalogs​/osdf​/cmip6​-aws​/cmip6​-osdf​-zarr​.json","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Yq8Tiet9YX"}],"urlSource":"https://data.rda.ucar.edu/d850001/catalogs/osdf/cmip6-aws/cmip6-osdf-zarr.json","key":"HO1d2OSrxn"}],"key":"baQncDyygQ"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"An entry in the catalog’s csv file looks like:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YroR9HYUSW"}],"key":"fYLvjjMTGh"}],"key":"trYsus9VBH"},{"type":"block","kind":"notebook-content","children":[{"type":"code","lang":"","value":"HighResMIP,CMCC,CMCC-CM2-HR4,highresSST-present,r1i1p1f1,Amon,ta,gn,osdf:///aws-opendata/us-west-2/cmip6-pds/CMIP6/HighResMIP/CMCC/CMCC-CM2-HR4/highresSST-present/r1i1p1f1/Amon/ta/gn/v20170706/,,20170706","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"key":"zlaQhSo7ii"}],"key":"rF4XrjHwCB"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Notice how the path is using the ‘osdf’ scheme and the ‘/aws-opendata/us-west-2’ namespace. If all the paths in the csv file are formatted like this, then you can use the Intake catalog exactly as usual.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZM7uGnJ6yB"}],"key":"T7uHhRtZI0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Here is a workflow and plot which uses an Intake catalog and the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CQFLOV6ArO"},{"type":"inlineCode","value":"osdf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GPdM0A8vcL"},{"type":"text","value":" scheme. If you want to understand more about the underlying workflow, please look at the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TBFkuB1aaC"},{"type":"link","url":"http://projectpythia.org/osdf-cookbook/notebooks/cmip6-gmst/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Global Mean Surface Temperature Anomalies (GMSTA) from CMIP6 data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gXJY1ibmR8"}],"urlSource":"http://projectpythia.org/osdf-cookbook/notebooks/cmip6-gmst/","key":"A9wUfWE6nl"},{"type":"text","value":" notebook.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LcYEaFLWpe"}],"key":"rghQXsJBcJ"}],"key":"vEQ36xxwUQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"rda_url     =  'https://data.rda.ucar.edu/'\ncat_url     = rda_url +  'd850001/catalogs/osdf/cmip6-aws/cmip6-osdf-zarr.json'\n\ncol = intake.open_esm_datastore(cat_url)\n\nexpts = ['historical']\n\nquery = dict(\n    experiment_id=expts,\n    table_id='Amon',\n    variable_id=['tas'],\n    member_id = 'r1i1p1f1',\n    #activity_id = 'CMIP',\n)\n\ncol_subset = col.search(require_all_on=[\"source_id\"], **query)\n\nds = xr.open_zarr(col_subset.df['zstore'][0])\n\nds.tas.isel(time=0).plot()","key":"Pqpojk0MUd"},{"type":"output","id":"BhpsWffneMLZzZjf5vRHI","data":[],"key":"s3cIIF19x9"}],"key":"dzKrrbiUbu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Direct Access of Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Tw2VNjN4mf"}],"identifier":"direct-access-of-data","label":"Direct Access of Data","html_id":"direct-access-of-data","implicit":true,"key":"L3PokAeDXM"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can also access the data directly using normal file system calls.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"p6ysUN9KPc"}],"key":"aSmg6sUdIo"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"For example, let’s say you want to read in a csv object from the OSDF. Just use the same pattern we’ve shown before of","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"df9c0wOtLN"}],"key":"C1J7uU8DlC"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"osdf:///<namespace-path>","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FFQ8YNu0Hd"}],"key":"E70GfKvm3P"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"for your path.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"phXfuuvyZR"}],"key":"kD7T2EQLpW"}],"key":"pzO3VyVVC9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"with fsspec.open('osdf:///ndp/burnpro3d/YosemiteBurnExample/burnpro3d-yosemite-example.csv') as ex_csv:\n    content = ex_csv.read()\n    print(content.decode())","key":"KgK9nJQKCP"},{"type":"output","id":"1FUVFXvdfs4_nxqvQVp18","data":[],"key":"uHWjmHg4Qu"}],"key":"W400UvODtG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jpOqh99YvW"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"ZqQpZVbLWp"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this notebook we demonstrated how to use PelicanFS and gave an overview of a few different common usages. The main example showed how to use PelicanFS and Xarray to open a Zarr store. We also showed how to use PelicanFS and an intake catalog.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fjVa7182Yu"}],"key":"iFvgf8UVAw"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s next?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"CdE8fsGJ3P"}],"identifier":"whats-next","label":"What’s next?","html_id":"whats-next","implicit":true,"key":"kJ3Us8DUKH"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The following notebooks all demonstrate various workflows which will use PelicanFS to access data from the OSDF.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IrAySeAjtT"}],"key":"Sc4ad6lhBs"}],"key":"HgaadYt1qm"}],"key":"UjVctQli1e"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Streaming Data with the Open Science Data Federation (OSDF)","url":"/notebooks/osdf-intro","group":"Introduction to OSDF"},"next":{"title":"Introduction to NSF NCAR’s Geoscience Data Exhcange","url":"/notebooks/ncar-intro","group":"NCAR examples"}}},"domain":"http://localhost:3000"}