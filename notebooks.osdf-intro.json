{"version":2,"kind":"Notebook","sha256":"3edb8979c3786f6d1d07179cbf1736e7b5f40de6921599e5d02417eb3adf757d","slug":"notebooks.osdf-intro","location":"/notebooks/01_osdf_intro.ipynb","dependencies":[],"frontmatter":{"title":"Streaming Data with the Open Science Data Federation (OSDF)","content_includes_title":false,"kernelspec":{"name":"bash","display_name":"Bash","language":"bash"},"authors":[{"nameParsed":{"literal":"Harsha R. Hampapura","given":"Harsha R.","family":"Hampapura"},"name":"Harsha R. Hampapura","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Brian Bockelman","given":"Brian","family":"Bockelman"},"name":"Brian Bockelman","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Alexander Hoelzeman","given":"Alexander","family":"Hoelzeman"},"name":"Alexander Hoelzeman","id":"contributors-myst-generated-uid-2"},{"nameParsed":{"literal":"Emma Turetsky","given":"Emma","family":"Turetsky"},"name":"Emma Turetsky","id":"contributors-myst-generated-uid-3"},{"nameParsed":{"literal":"Amandha Wingert Barok","given":"Amandha Wingert","family":"Barok"},"name":"Amandha Wingert Barok","id":"contributors-myst-generated-uid-4"},{"nameParsed":{"literal":"Aashish Panta","given":"Aashish","family":"Panta"},"name":"Aashish Panta","id":"contributors-myst-generated-uid-5"},{"nameParsed":{"literal":"Riley Conroy","given":"Riley","family":"Conroy"},"name":"Riley Conroy","id":"contributors-myst-generated-uid-6"},{"nameParsed":{"literal":"Douglas Schuster","given":"Douglas","family":"Schuster"},"name":"Douglas Schuster","id":"contributors-myst-generated-uid-7"},{"nameParsed":{"literal":"Justin Hiemstra","given":"Justin","family":"Hiemstra"},"name":"Justin Hiemstra","id":"contributors-myst-generated-uid-8"},{"nameParsed":{"literal":"Kibiwott Koech","given":"Kibiwott","family":"Koech"},"name":"Kibiwott Koech","id":"contributors-myst-generated-uid-9"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/osdf-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/osdf-cookbook/blob/main/notebooks/01_osdf_intro.ipynb","thumbnail":"/osdf-cookbook/build/osdf-map-f9d0cbf31add9df99bcce039c9f45fee.png","exports":[{"format":"ipynb","filename":"01_osdf_intro.ipynb","url":"/osdf-cookbook/build/01_osdf_intro-4ad5bd592510ccdc34a8f105e42d07e2.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Have you ever pondered why accessing large-scale ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VrfPLLymjf"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"scientific data","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"B9bU9twZPM"}],"key":"OBeNqFqeg6"},{"type":"text","value":" is so complicated while accessing large-scale volumes of ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"uwXTQ5DTkJ"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"movies","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BM65YpJ2a9"}],"key":"t3QjzMuNo4"},{"type":"text","value":" is so simple on Netflix?","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"J9KJVWgnvW"}],"key":"TykuywwhGU"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Each data repository has its own website for accessing data or a set of unique tools.  Users are often encouraged to download datasets locally and then compute on the data locally as repositories are built for archiving and curation, not scale.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"DcVyKvFI7v"}],"key":"o0vnCzYr68"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"How does Netflix do it?  They leverage a content distribution network (CDN) which caches copies of the most popular movies at opportune locations on the Internet closer to users.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"OtByAw5F6e"}],"key":"XuwvaI7H68"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"The OSDF is an NSF-funded infrastructure providing a CDN for science.  It is connected to popular open science repositories and has hardware embedded across US and international networks and at large computing sites.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ZskWDel036"}],"key":"kuECaQuTGO"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"This cookbook provides examples of using the OSDF’s streaming to power science use cases in earth sciences.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"savANVDcc5"}],"key":"M8SHMrrDLK"},{"type":"heading","depth":2,"position":{"start":{"line":14,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Do first, understand later","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"kmibtLTisG"}],"identifier":"do-first-understand-later","label":"Do first, understand later","html_id":"do-first-understand-later","implicit":true,"key":"kF8szu3kRK"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"How do you use the OSDF?","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Wx0wHprCGH"}],"key":"v12qB1srz0"}],"key":"AcX45V2qip"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"The service is powered by the same protocol as the web, HTTPS.  Thus, the simplest use case is to download an object by using the browser.","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"HIIrBWbKdb"}],"key":"QpBrnsquJ7"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Click on this link:","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"a1eeCUMNIC"}],"key":"sNmO5NSsP3"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"link","url":"https://osdf-director.osg-htc.org/ospool/uc-shared/public/OSG-Staff/validation/test.txt","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"https://​osdf​-director​.osg​-htc​.org​/ospool​/uc​-shared​/public​/OSG​-Staff​/validation​/test​.txt","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"Vkcuw1nU9q"}],"urlSource":"https://osdf-director.osg-htc.org/ospool/uc-shared/public/OSG-Staff/validation/test.txt","key":"A2RMuxXiY4"}],"key":"j9XoZVfBen"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"If a new tab opened with the text “Hello, World” – congratulations, you used the OSDF!","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"rqTk9Kzbco"}],"key":"mMmJ57T06Z"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"OSDF is often used in conjunction with computing workflows and downloads occur as part of a script.  For this, a command line client - pelican is utilized.  Try running the following:","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"xbLGWAtky5"}],"key":"sB7t4YuZZa"}],"key":"OavuKGIrw9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"bash","executable":true,"value":"pelican object get osdf:///routeviews/chicago/route-views.chicago/bgpdata/2025.03/RIBS/rib.20250319.0400.bz2 ./","key":"vTjEEBJeaM"},{"type":"output","id":"MgapK-KfEWZnNVvuzHj1x","data":[{"output_type":"stream","name":"stdout","text":"rib.20250319.0400.bz2 32.56 MiB / 72.45 MiB [========>-----------] 0s ] 0.00 b/s\n"},{"output_type":"stream","name":"stdout","text":"\u001b[1A\u001b[Jrib.20250319.0400.bz2 32.56 MiB / 72.45 MiB [========>-----------] 0s ] 0.00 b/s\n"},{"output_type":"stream","name":"stdout","text":"\u001b[1A\u001b[Jrib.20250319.0400.bz2 32.56 MiB / 72.45 MiB [========>-----------] 0s ] 0.00 b/s\n"},{"output_type":"stream","name":"stdout","text":"\u001b[1A\u001b[Jrib.20250319.0400.bz2 72.45 MiB / 72.45 MiB [============================] Done!\n"},{"output_type":"stream","name":"stdout","text":"\u001b[1A\u001b[Jrib.20250319.0400.bz2 72.45 MiB / 72.45 MiB [============================] Done!\n"},{"output_type":"stream","name":"stdout","text":"\u001b[1A\u001b[J\n"}],"key":"u5FEQGJ6eb"}],"key":"F07FTCdObD"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Depending on the speed of your Internet connection, you may see a progress bar as the download proceeds.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wtPrt9z8Th"}],"key":"FXb7NHXZbX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Congratulations, you’re now the proud owner of 72MB of Internet routing data!","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wwCd2ZoMCa"}],"key":"uklhe4baJj"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"For both of these cases, we downloaded the entire object.  What happens if the dataset contains data for the entire planet but you are only interested in the state of Nebraska?  It’s more effective to stream the subset.  For that, we will use the Pelican Python library; this library will be used throughout the remaining chapters of this cookbook.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Wejoqu7ZeS"}],"key":"YZbT0vRJ7m"},{"type":"heading","depth":2,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"About the OSDF","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UwMffRZdZY"}],"identifier":"about-the-osdf","label":"About the OSDF","html_id":"about-the-osdf","implicit":true,"key":"Osw6uZwHlY"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"You don’t need to know how Netflix is built to press “play”.  Similarly, you don’t need to understand the guts of the OSDF to use it in your science.  However, a few key concepts are useful!","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"h9MqUbOAqI"}],"key":"yhK6PV02YS"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"OSDF Infrastructure","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ywRaE9L4c0"}],"key":"yee6Mc13lW"},{"type":"text","value":": The map below shows the distributed pieces of the OSDF:","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"zp2whA9J0J"}],"key":"CwT3TSC3tC"},{"type":"image","url":"/osdf-cookbook/build/osdf-map-f9d0cbf31add9df99bcce039c9f45fee.png","alt":"Map of the OSDF services","title":"OSDF Services","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"Bcs3FvrABY","urlSource":"../images/osdf-map.png"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Each “O” on the map is an origin; the origin service connects an existing repository to the OSDF service, making some datasets available and protecting the repository from overload.  Origins are typically placed nearby where the data lives; the origin for the NCAR Research Data Archive (RDA) is in the same datacenter as the RDA.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"dUu1rNRWYZ"}],"key":"eP4KDW9y8Q"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Each “C” is a cache.  The cache makes temporary copies of objects upon access so, on subsequent accesses, the object comes from the cache and not from the repository.  This reduces the load on the repository and, ideally, increases scalability.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"lgDcXUJaxu"}],"key":"LPjXng9ma4"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"strong","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Unified Namespace","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"MMLt1CrsBE"}],"key":"Upr4RnAKII"},{"type":"text","value":": The OSDF provides a unified namespace for all available objects.  Each repository receives a unique prefix (the IceCube experiment’s data is available from /icecube; NCAR’s RDA is available from /ncar-rda) and the object can be referenced from within the prefix.","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"NVVd6xpuBt"}],"key":"wSdDW8xr02"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"From our RouteViews example above, we were interested in accessing the object named chicago/route-views.chicago/bgpdata/2025.03/RIBS/rib.20250319.0400.bz2.  Since the prefix for RouteViews is /routeviews, the entire OSDF name is:","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"nzf8ImamjI"}],"key":"P73J7qouZ7"},{"type":"code","lang":"","value":"osdf://routeviews/chicago/route-views.chicago/bgpdata/2025.03/RIBS/rib.20250319.0400.bz2","position":{"start":{"line":24,"column":1},"end":{"line":26,"column":1}},"key":"FP2TENpVO9"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"strong","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Immutable Objects","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"fEtyO2mVVt"}],"key":"fIaSfbcBsB"},{"type":"text","value":": The OSDF assumes that objects are immutable; once created, they aren’t permitted to be changed.  This allows OSDF to effectively make copies of the objects in the caches.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"vWPDZDMX2M"}],"key":"ui7IUcaAhR"},{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"This typically works well with scientific datasets: you rarely change your data after you record it!  However, if you start using OSDF more heavily, this is an important requirement to be aware of.","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"vsLPj6kxXY"}],"key":"xXqyFTsdM8"},{"type":"heading","depth":2,"position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Finding My Objects","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"RvHHyj6C6i"}],"identifier":"finding-my-objects","label":"Finding My Objects","html_id":"finding-my-objects","implicit":true,"key":"UC2hj7rOfV"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"How do you find the object you’re interested in?","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"uQZnB0Dye8"}],"key":"KzHK7BQXPQ"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Typically, dataset providers connected to the OSDF provide a search, data catalog, or STAC catalog publishing OSDF-style URLs.  You can determine this from the provider’s website; additionally, OSDF maintains a list of known links you can peruse.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"FEdXbFfShB"}],"key":"XjwenmtWMm"},{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Explore this cookbook: This cookbook provides examples for how to use OSDF to access:","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"Xqr5zgBmCm"}],"key":"ivXEJaVGvY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":41,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"NCAR’s Research Data Archive.","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"ay9f4bdO9X"}],"key":"k92AKpO3B3"},{"type":"listItem","spread":true,"position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"AWS’s OpenData Program.","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"SN5UiT5W5C"}],"key":"jRA4MS9hHr"},{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"The Envistor platform at Florida International University.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"p4AF0oa41P"}],"key":"OEpdgisCfG"}],"key":"BYJX18xtO3"}],"key":"CyOthFjuy7"}],"key":"y5LvaSPLpd"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Project Pythia Notebook Template","url":"/notebooks/notebook-template","group":"Introduction to OSDF"},"next":{"title":"Introduction to the Research Data Archive","url":"/notebooks/ncar-intro","group":"NCAR examples"}}},"domain":"http://localhost:3000"}